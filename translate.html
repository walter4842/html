<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ë¹„ì¦ˆë‹ˆìŠ¤ ë²ˆì—­ê¸° Pro</title>
    <style>
        :root {
            --primary-color: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary-color: #64748b;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
            --bg-color: #ffffff;
            --surface-color: #f8fafc;
            --surface-hover: #f1f5f9;
            --text-color: #1e293b;
            --text-secondary: #64748b;
            --text-muted: #94a3b8;
            --border-color: #e2e8f0;
            --border-focus: #3b82f6;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 10px 10px -5px rgb(0 0 0 / 0.04);
            --radius: 8px;
            --radius-lg: 12px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        [data-theme="dark"] {
            --bg-color: #0f172a;
            --surface-color: #1e293b;
            --surface-hover: #334155;
            --text-color: #f1f5f9;
            --text-secondary: #cbd5e1;
            --text-muted: #94a3b8;
            --border-color: #334155;
            --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.3), 0 1px 2px -1px rgb(0 0 0 / 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, var(--bg-color) 0%, var(--surface-color) 100%);
            color: var(--text-color);
            line-height: 1.6;
            transition: var(--transition);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: var(--surface-color);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--success-color));
        }

        .header h1 {
            background: linear-gradient(135deg, var(--primary-color), var(--success-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 12px;
            font-size: 2.8rem;
            font-weight: 700;
            letter-spacing: -0.02em;
        }

        .header p {
            color: var(--text-secondary);
            font-size: 1.2rem;
            max-width: 600px;
            margin: 0 auto;
        }

        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
            margin-bottom: 40px;
        }

        .control-group {
            background: var(--surface-color);
            padding: 24px;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            transition: var(--transition);
            position: relative;
        }

        .control-group:hover {
            box-shadow: var(--shadow-lg);
            transform: translateY(-2px);
        }

        .control-group label {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            font-weight: 600;
            color: var(--text-color);
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .control-icon {
            margin-right: 8px;
            font-size: 1.2rem;
        }

        select, input, textarea {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid var(--border-color);
            border-radius: var(--radius);
            background: var(--bg-color);
            color: var(--text-color);
            font-size: 16px;
            font-family: inherit;
            transition: var(--transition);
            outline: none;
        }

        select:hover, input:hover, textarea:hover {
            border-color: var(--primary-color);
        }

        select:focus, input:focus, textarea:focus {
            border-color: var(--border-focus);
            box-shadow: 0 0 0 3px rgb(59 130 246 / 0.1);
        }

        .translation-area {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 24px;
            margin-bottom: 40px;
            align-items: start;
        }

        .swap-button {
            align-self: center;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.2rem;
            transition: var(--transition);
            box-shadow: var(--shadow);
        }

        .swap-button:hover {
            background: var(--primary-dark);
            transform: rotate(180deg) scale(1.1);
        }

        .text-panel {
            background: var(--surface-color);
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-color);
            transition: var(--transition);
        }

        .text-panel:hover {
            box-shadow: var(--shadow-xl);
        }

        .panel-header {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            padding: 20px 24px;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
        }

        .panel-title {
            display: flex;
            align-items: center;
            font-size: 1.1rem;
        }

        .panel-title::before {
            content: 'ğŸ“';
            margin-right: 8px;
        }

        .panel-header.target .panel-title::before {
            content: 'âœ¨';
        }

        .char-count {
            font-size: 0.9rem;
            opacity: 0.9;
            background: rgba(255, 255, 255, 0.2);
            padding: 4px 8px;
            border-radius: 12px;
            font-weight: 500;
        }

        .panel-content {
            padding: 24px;
        }

        .textarea-container {
            position: relative;
        }

        textarea {
            min-height: 320px;
            resize: vertical;
            border: none;
            background: transparent;
            font-family: 'SF Mono', Monaco, Consolas, monospace;
            line-height: 1.7;
        }

        .textarea-placeholder {
            position: absolute;
            top: 14px;
            left: 16px;
            color: var(--text-muted);
            pointer-events: none;
            transition: var(--transition);
            font-style: italic;
        }

        textarea:focus + .textarea-placeholder,
        textarea:not(:placeholder-shown) + .textarea-placeholder {
            opacity: 0;
            transform: translateY(-10px);
        }

        .button-group {
            display: flex;
            gap: 12px;
            margin-top: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        button {
            padding: 12px 24px;
            border: none;
            border-radius: var(--radius);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
            font-family: inherit;
            position: relative;
            overflow: hidden;
        }

        button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s;
        }

        button:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            box-shadow: var(--shadow);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-secondary {
            background: var(--secondary-color);
            color: white;
        }

        .btn-secondary:hover {
            background: #475569;
            transform: translateY(-1px);
        }

        .btn-success {
            background: var(--success-color);
            color: white;
        }

        .btn-success:hover {
            background: #059669;
        }

        .btn-icon {
            background: var(--surface-color);
            border: 2px solid var(--border-color);
            color: var(--text-color);
            padding: 10px;
            border-radius: var(--radius);
            min-width: 44px;
            justify-content: center;
        }

        .btn-icon:hover {
            background: var(--surface-hover);
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        .loading {
            opacity: 0.8;
            pointer-events: none;
            position: relative;
        }

        .loading::after {
            content: '';
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            border: 2px solid transparent;
            border-top: 2px solid currentColor;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: translateY(-50%) rotate(360deg); }
        }

        .main-translate-btn {
            grid-column: 1 / -1;
            padding: 16px 32px;
            font-size: 1.1rem;
            border-radius: var(--radius-lg);
            background: linear-gradient(135deg, var(--primary-color), var(--success-color));
            color: white;
            box-shadow: var(--shadow-lg);
            margin: 20px 0;
        }

        .main-translate-btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-xl);
        }

        .history-panel, .stats-panel, .settings-panel {
            background: var(--surface-color);
            border-radius: var(--radius-lg);
            padding: 28px;
            margin-bottom: 32px;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-color);
        }

        .panel-title-main {
            display: flex;
            align-items: center;
            margin-bottom: 24px;
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--text-color);
        }

        .panel-title-main::before {
            content: 'ğŸ“Š';
            margin-right: 12px;
            font-size: 1.5rem;
        }

        .history-panel .panel-title-main::before { content: 'ğŸ“š'; }
        .settings-panel .panel-title-main::before { content: 'âš™ï¸'; }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 24px;
        }

        .stat-card {
            background: var(--bg-color);
            padding: 20px;
            border-radius: var(--radius);
            text-align: center;
            border: 1px solid var(--border-color);
            transition: var(--transition);
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
            display: block;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-top: 4px;
        }

        .history-item {
            background: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 16px;
            transition: var(--transition);
        }

        .history-item:hover {
            box-shadow: var(--shadow);
            border-color: var(--primary-color);
        }

        .history-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .history-tags {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .tag {
            background: var(--primary-color);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .history-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .history-text {
            padding: 12px;
            background: var(--surface-color);
            border-radius: var(--radius);
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .theme-toggle {
            position: fixed;
            top: 24px;
            right: 24px;
            z-index: 1000;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: var(--surface-color);
            border: 2px solid var(--border-color);
            color: var(--text-color);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            transition: var(--transition);
            box-shadow: var(--shadow-lg);
        }

        .theme-toggle:hover {
            transform: scale(1.1) rotate(15deg);
            box-shadow: var(--shadow-xl);
        }

        .alert {
            padding: 16px 20px;
            border-radius: var(--radius);
            margin-bottom: 24px;
            border: 1px solid;
            display: flex;
            align-items: center;
            gap: 12px;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .alert-error {
            background: #fef2f2;
            color: #991b1b;
            border-color: #fecaca;
        }

        .alert-warning {
            background: #fffbeb;
            color: #92400e;
            border-color: #fed7aa;
        }

        .alert-info {
            background: #eff6ff;
            color: #1e40af;
            border-color: #bfdbfe;
        }

        .alert-success {
            background: #f0fdf4;
            color: #166534;
            border-color: #bbf7d0;
        }

        [data-theme="dark"] .alert-error {
            background: #450a0a;
            color: #fca5a5;
            border-color: #7f1d1d;
        }

        [data-theme="dark"] .alert-warning {
            background: #451a03;
            color: #fbbf24;
            border-color: #92400e;
        }

        [data-theme="dark"] .alert-info {
            background: #1e3a8a;
            color: #93c5fd;
            border-color: #3730a3;
        }

        [data-theme="dark"] .alert-success {
            background: #14532d;
            color: #86efac;
            border-color: #166534;
        }

        .alert-close {
            margin-left: auto;
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            color: inherit;
            padding: 0;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: var(--transition);
        }

        .alert-close:hover {
            background: rgba(0, 0, 0, 0.1);
        }

        .guide-section {
            background: var(--surface-color);
            border-radius: var(--radius-lg);
            padding: 28px;
            margin-top: 40px;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-color);
        }

        .guide-section h3 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 1.4rem;
            display: flex;
            align-items: center;
        }

        .guide-section h3::before {
            content: 'ğŸ“–';
            margin-right: 12px;
        }

        .guide-section details {
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            overflow: hidden;
        }

        .guide-section summary {
            cursor: pointer;
            font-weight: 600;
            padding: 16px 20px;
            background: var(--bg-color);
            border-bottom: 1px solid var(--border-color);
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .guide-section summary:hover {
            background: var(--surface-hover);
        }

        .guide-section details[open] summary {
            background: var(--primary-color);
            color: white;
        }

        .guide-content {
            padding: 20px;
        }

        .guide-section pre {
            background: var(--bg-color);
            padding: 20px;
            border-radius: var(--radius);
            overflow-x: auto;
            font-size: 0.9rem;
            border: 1px solid var(--border-color);
            margin: 12px 0;
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background: var(--border-color);
            border-radius: 2px;
            overflow: hidden;
            margin: 16px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--success-color));
            transition: width 0.3s ease;
            width: 0%;
        }

        .floating-actions {
            position: fixed;
            bottom: 24px;
            right: 24px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            z-index: 1000;
        }

        .fab {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            box-shadow: var(--shadow-lg);
            transition: var(--transition);
        }

        .fab:hover {
            transform: scale(1.1);
            box-shadow: var(--shadow-xl);
        }

        @media (max-width: 1024px) {
            .translation-area {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .swap-button {
                justify-self: center;
                transform: rotate(90deg);
            }
            
            .controls {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 16px;
            }
            
            .header h1 {
                font-size: 2.2rem;
            }
            
            .controls {
                grid-template-columns: 1fr;
            }
            
            .button-group {
                justify-content: center;
            }
            
            .history-content {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }
            
            .theme-toggle {
                top: 16px;
                right: 16px;
                width: 48px;
                height: 48px;
            }
            
            .floating-actions {
                bottom: 16px;
                right: 16px;
            }
            
            .fab {
                width: 48px;
                height: 48px;
                font-size: 1.1rem;
            }
        }

        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-ready {
            background: var(--success-color);
            box-shadow: 0 0 6px var(--success-color);
        }

        .status-error {
            background: var(--error-color);
            box-shadow: 0 0 6px var(--error-color);
        }

        .status-loading {
            background: var(--warning-color);
            animation: pulse 2s infinite;
            box-shadow: 0 0 6px var(--warning-color);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.1); }
        }

        .model-info {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 4px;
            font-style: italic;
        }

        .cost-estimate {
            background: var(--warning-color);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
            margin-left: 8px;
        }

        .keyboard-shortcuts {
            position: fixed;
            bottom: 100px;
            right: 24px;
            background: var(--surface-color);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            padding: 12px;
            font-size: 0.8rem;
            color: var(--text-secondary);
            opacity: 0;
            transform: translateX(100%);
            transition: var(--transition);
            z-index: 1000;
        }

        .keyboard-shortcuts.show {
            opacity: 1;
            transform: translateX(0);
        }

        .shortcut {
            display: flex;
            justify-content: space-between;
            margin-bottom: 4px;
        }

        .shortcut-key {
            background: var(--bg-color);
            padding: 2px 6px;
            border-radius: 3px;
            font-family: monospace;
            font-size: 0.75rem;
        }
    </style>
</head>
<body>
    <button class="theme-toggle" onclick="toggleTheme()" title="í…Œë§ˆ ì „í™˜ (Alt+T)">
        ğŸŒ™
    </button>

    <div class="keyboard-shortcuts" id="shortcuts">
        <div class="shortcut">
            <span>ë²ˆì—­</span>
            <span class="shortcut-key">Ctrl+Enter</span>
        </div>
        <div class="shortcut">
            <span>í…ìŠ¤íŠ¸ êµì²´</span>
            <span class="shortcut-key">Ctrl+R</span>
        </div>
        <div class="shortcut">
            <span>ë³µì‚¬</span>
            <span class="shortcut-key">Ctrl+C</span>
        </div>
        <div class="shortcut">
            <span>í…Œë§ˆ ì „í™˜</span>
            <span class="shortcut-key">Alt+T</span>
        </div>
    </div>

    <div class="floating-actions">
        <button class="fab" onclick="scrollToTop()" title="ë§¨ ìœ„ë¡œ">â†‘</button>
        <button class="fab" onclick="toggleShortcuts()" title="ë‹¨ì¶•í‚¤ ë³´ê¸°">âŒ¨ï¸</button>
    </div>

    <div class="container">
        <header class="header">
            <h1>AI ë¹„ì¦ˆë‹ˆìŠ¤ ë²ˆì—­ê¸° Pro</h1>
            <p>ì „ë¬¸ì ì¸ ë¹„ì¦ˆë‹ˆìŠ¤ ë¬¸ì„œ ë²ˆì—­ì„ ìœ„í•œ ì°¨ì„¸ëŒ€ AI ê¸°ë°˜ ì†”ë£¨ì…˜</p>
        </header>

        <div id="alerts"></div>

        <div class="controls">
            <div class="control-group">
                <label for="modelSelect">
                    <span class="control-icon">ğŸ¤–</span>
                    <span class="status-indicator" id="apiStatus"></span>
                    AI ëª¨ë¸ ì„ íƒ
                </label>
                <select id="modelSelect" onchange="updateModelInfo()">
                    <option value="">ëª¨ë¸ì„ ì„ íƒí•˜ì„¸ìš”</option>
                </select>
                <div class="model-info" id="modelInfo"></div>
            </div>

            <div class="control-group">
                <label for="toneSelect">
                    <span class="control-icon">ğŸ­</span>
                    ë²ˆì—­ í†¤
                </label>
                <select id="toneSelect">
                    <option value="formal">ê³µì‹ì  (Formal)</option>
                    <option value="business" selected>ë¹„ì¦ˆë‹ˆìŠ¤ (Business)</option>
                    <option value="casual">ì¼ë°˜ì  (Casual)</option>
                    <option value="academic">í•™ìˆ ì  (Academic)</option>
                    <option value="creative">ì°½ì˜ì  (Creative)</option>
                </select>
            </div>

            <div class="control-group">
                <label for="industrySelect">
                    <span class="control-icon">ğŸ¢</span>
                    ì‚°ì—… ë¶„ì•¼
                </label>
                <select id="industrySelect">
                    <option value="general">ì¼ë°˜</option>
                    <option value="legal">ë²•ë¥ </option>
                    <option value="finance">ê¸ˆìœµ</option>
                    <option value="technology">ê¸°ìˆ /IT</option>
                    <option value="medical">ì˜ë£Œ</option>
                    <option value="marketing">ë§ˆì¼€íŒ…</option>
                    <option value="manufacturing">ì œì¡°ì—…</option>
                    <option value="education">êµìœ¡</option>
                </select>
            </div>

            <div class="control-group">
                <label for="directionSelect">
                    <span class="control-icon">ğŸ”„</span>
                    ë²ˆì—­ ë°©í–¥
                </label>
                <select id="directionSelect">
                    <option value="ko-en">í•œêµ­ì–´ â†’ ì˜ì–´</option>
                    <option value="en-ko">ì˜ì–´ â†’ í•œêµ­ì–´</option>
                    <option value="ko-ja">í•œêµ­ì–´ â†’ ì¼ë³¸ì–´</option>
                    <option value="ja-ko">ì¼ë³¸ì–´ â†’ í•œêµ­ì–´</option>
                    <option value="ko-zh">í•œêµ­ì–´ â†’ ì¤‘êµ­ì–´</option>
                    <option value="zh-ko">ì¤‘êµ­ì–´ â†’ í•œêµ­ì–´</option>
                </select>
            </div>
        </div>

        <div class="translation-area">
            <div class="text-panel">
                <div class="panel-header">
                    <div class="panel-title">ì›ë¬¸</div>
                    <div class="char-count" id="sourceCount">0ì</div>
                </div>
                <div class="panel-content">
                    <div class="textarea-container">
                        <textarea 
                            id="sourceText" 
                            placeholder=""
                            oninput="updateCharCount(); calculateCost()"></textarea>
                        <div class="textarea-placeholder">ë²ˆì—­í•  í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”...</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="sourceProgress"></div>
                    </div>
                    <div class="button-group">
                        <button class="btn-icon" onclick="clearSource()" title="ì§€ìš°ê¸° (Ctrl+Del)">ğŸ—‘ï¸</button>
                        <button class="btn-icon" onclick="copyText('sourceText')" title="ë³µì‚¬ (Ctrl+C)">ğŸ“‹</button>
                        <button class="btn-icon" onclick="pasteText('sourceText')" title="ë¶™ì—¬ë„£ê¸° (Ctrl+V)">ğŸ“„</button>
                        <button class="btn-icon" onclick="uploadFile()" title="íŒŒì¼ ì—…ë¡œë“œ">ğŸ“</button>
                    </div>
                </div>
            </div>

            <button class="swap-button" onclick="swapTexts()" title="í…ìŠ¤íŠ¸ êµì²´ (Ctrl+R)">
                ğŸ”„
            </button>

            <div class="text-panel">
                <div class="panel-header target">
                    <div class="panel-title">ë²ˆì—­ë¬¸</div>
                    <div style="display: flex; align-items: center;">
                        <div class="char-count" id="targetCount">0ì</div>
                        <div class="cost-estimate" id="costEstimate" style="display: none;">$0.00</div>
                    </div>
                </div>
                <div class="panel-content">
                    <div class="textarea-container">
                        <textarea 
                            id="targetText" 
                            placeholder=""
                            readonly
                            oninput="updateCharCount()"></textarea>
                        <div class="textarea-placeholder">ë²ˆì—­ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤...</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="targetProgress"></div>
                    </div>
                    <div class="button-group">
                        <button class="btn-primary main-translate-btn" onclick="translateText()" id="translateBtn">
                            âœ¨ ë²ˆì—­í•˜ê¸°
                        </button>
                        <button class="btn-icon" onclick="copyText('targetText')" title="ë³µì‚¬">ğŸ“‹</button>
                        <button class="btn-icon" onclick="exportTranslation()" title="ë‚´ë³´ë‚´ê¸°">ğŸ’¾</button>
                        <button class="btn-icon" onclick="shareTranslation()" title="ê³µìœ ">ğŸ“¤</button>
                        <button class="btn-secondary" onclick="improveTranslation()" title="ë²ˆì—­ ê°œì„ ">ğŸ¯</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="stats-panel">
            <div class="panel-title-main">ë²ˆì—­ í†µê³„</div>
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-number" id="totalTranslations">0</span>
                    <div class="stat-label">ì´ ë²ˆì—­ ìˆ˜</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="totalCharacters">0</span>
                    <div class="stat-label">ë²ˆì—­ëœ ê¸€ì ìˆ˜</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="todayTranslations">0</span>
                    <div class="stat-label">ì˜¤ëŠ˜ ë²ˆì—­ ìˆ˜</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="averageLength">0</span>
                    <div class="stat-label">í‰ê·  ê¸¸ì´</div>
                </div>
            </div>
        </div>

        <div class="history-panel">
            <div class="panel-title-main">ë²ˆì—­ íˆìŠ¤í† ë¦¬</div>
            <div style="margin-bottom: 20px;">
                <button class="btn-secondary" onclick="toggleHistory()" id="historyToggle">
                    ğŸ“š íˆìŠ¤í† ë¦¬ ë³´ê¸°
                </button>
                <button class="btn-secondary" onclick="clearHistory()">
                    ğŸ—‘ï¸ íˆìŠ¤í† ë¦¬ ì‚­ì œ
                </button>
                <button class="btn-success" onclick="exportHistory()">
                    ğŸ’¾ íˆìŠ¤í† ë¦¬ ë‚´ë³´ë‚´ê¸°
                </button>
                <button class="btn-icon" onclick="searchHistory()" title="íˆìŠ¤í† ë¦¬ ê²€ìƒ‰">ğŸ”</button>
            </div>
            <input type="text" id="historySearch" placeholder="íˆìŠ¤í† ë¦¬ ê²€ìƒ‰..." style="margin-bottom: 16px; display: none;" oninput="filterHistory()">
            <div id="historyList" style="display: none;"></div>
        </div>

        <div class="settings-panel">
            <div class="panel-title-main">ì„¤ì •</div>
            <div class="controls">
                <div class="control-group">
                    <label>
                        <span class="control-icon">ğŸ”§</span>
                        ìë™ ì €ì¥
                    </label>
                    <label style="display: flex; align-items: center; margin-top: 8px;">
                        <input type="checkbox" id="autoSave" checked style="width: auto; margin-right: 8px;">
                        ë²ˆì—­ ê²°ê³¼ ìë™ ì €ì¥
                    </label>
                </div>
                <div class="control-group">
                    <label>
                        <span class="control-icon">ğŸ”Š</span>
                        ì•Œë¦¼ ì„¤ì •
                    </label>
                    <label style="display: flex; align-items: center; margin-top: 8px;">
                        <input type="checkbox" id="soundNotification" style="width: auto; margin-right: 8px;">
                        ë²ˆì—­ ì™„ë£Œ ì‹œ ì•Œë¦¼ìŒ
                    </label>
                </div>
                <div class="control-group">
                    <label>
                        <span class="control-icon">âš¡</span>
                        ë²ˆì—­ í’ˆì§ˆ
                    </label>
                    <select id="qualitySelect">
                        <option value="fast">ë¹ ë¥¸ ë²ˆì—­</option>
                        <option value="balanced" selected>ê· í˜•</option>
                        <option value="high">ê³ í’ˆì§ˆ</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="guide-section">
            <h3>ì‚¬ìš© ê°€ì´ë“œ & FAQ</h3>
            
            <details>
                <summary>ğŸš€ ë¹ ë¥¸ ì‹œì‘ ê°€ì´ë“œ</summary>
                <div class="guide-content">
                    <ol>
                        <li><strong>config.json íŒŒì¼ ìƒì„±:</strong> HTML íŒŒì¼ê³¼ ê°™ì€ í´ë”ì— API í‚¤ ì„¤ì •</li>
                        <li><strong>ëª¨ë¸ ì„ íƒ:</strong> ì‚¬ìš©í•  AI ëª¨ë¸ì„ ë“œë¡­ë‹¤ìš´ì—ì„œ ì„ íƒ</li>
                        <li><strong>ë²ˆì—­ ì„¤ì •:</strong> í†¤, ì‚°ì—… ë¶„ì•¼, ë²ˆì—­ ë°©í–¥ ì„¤ì •</li>
                        <li><strong>í…ìŠ¤íŠ¸ ì…ë ¥:</strong> ì›ë¬¸ ì˜ì—­ì— ë²ˆì—­í•  í…ìŠ¤íŠ¸ ì…ë ¥</li>
                        <li><strong>ë²ˆì—­ ì‹¤í–‰:</strong> "ë²ˆì—­í•˜ê¸°" ë²„íŠ¼ í´ë¦­ ë˜ëŠ” Ctrl+Enter</li>
                    </ol>
                </div>
            </details>

            <details>
                <summary>âš™ï¸ config.json ì„¤ì • ë°©ë²•</summary>
                <div class="guide-content">
                    <p>HTML íŒŒì¼ê³¼ ê°™ì€ ë””ë ‰í† ë¦¬ì— <code>config.json</code> íŒŒì¼ì„ ìƒì„±í•˜ì„¸ìš”:</p>
                    <pre>{
  "openai": {
    "apiKey": "your-openai-api-key",
    "models": ["gpt-4", "gpt-3.5-turbo", "gpt-4-turbo"]
  },
  "anthropic": {
    "apiKey": "your-anthropic-api-key",
    "models": ["claude-3-5-sonnet-20241022", "claude-3-haiku-20240307"]
  },
  "google": {
    "apiKey": "your-google-api-key",
    "models": ["gemini-pro", "gemini-pro-vision"]
  }
}</pre>
                    <p><strong>âš ï¸ ë³´ì•ˆ ì£¼ì˜ì‚¬í•­:</strong> config.json íŒŒì¼ì„ ì ˆëŒ€ ê³µê°œ ì €ì¥ì†Œì— ì—…ë¡œë“œí•˜ì§€ ë§ˆì„¸ìš”!</p>
                </div>
            </details>

            <details>
                <summary>ğŸ”§ ëª¨ë¸ë³„ íŠ¹ì§• ë° ê¶Œì¥ì‚¬í•­</summary>
                <div class="guide-content">
                    <ul>
                        <li><strong>GPT-4:</strong> ìµœê³  í’ˆì§ˆ, ë³µì¡í•œ ë¬¸ì„œì— ì í•© (ë¹„ìš© ë†’ìŒ)</li>
                        <li><strong>GPT-3.5-turbo:</strong> ê· í˜•ì¡íŒ ì„±ëŠ¥, ì¼ë°˜ì ì¸ ì—…ë¬´ì— ì í•©</li>
                        <li><strong>Claude 3.5 Sonnet:</strong> ê¸´ ë¬¸ì„œ ì²˜ë¦¬ì— ìš°ìˆ˜, ì°½ì˜ì  ë²ˆì—­</li>
                        <li><strong>Claude 3 Haiku:</strong> ë¹ ë¥¸ ì†ë„, ê°„ë‹¨í•œ í…ìŠ¤íŠ¸ì— ì í•©</li>
                        <li><strong>Gemini Pro:</strong> êµ¬ê¸€ì˜ ìµœì‹  ëª¨ë¸, ë‹¤ì–‘í•œ ì–¸ì–´ ì§€ì›</li>
                    </ul>
                </div>
            </details>

            <details>
                <summary>âŒ¨ï¸ í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤</summary>
                <div class="guide-content">
                    <ul>
                        <li><kbd>Ctrl + Enter</kbd>: ë²ˆì—­ ì‹¤í–‰</li>
                        <li><kbd>Ctrl + R</kbd>: ì›ë¬¸ê³¼ ë²ˆì—­ë¬¸ êµì²´</li>
                        <li><kbd>Ctrl + C</kbd>: í™œì„± í…ìŠ¤íŠ¸ ë³µì‚¬</li>
                        <li><kbd>Alt + T</kbd>: í…Œë§ˆ ì „í™˜</li>
                        <li><kbd>Ctrl + Del</kbd>: ì›ë¬¸ ì§€ìš°ê¸°</li>
                        <li><kbd>F1</kbd>: ë„ì›€ë§ í‘œì‹œ</li>
                    </ul>
                </div>
            </details>

            <details>
                <summary>ğŸ’¡ ë²ˆì—­ í’ˆì§ˆ í–¥ìƒ íŒ</summary>
                <div class="guide-content">
                    <ul>
                        <li><strong>ë¬¸ë§¥ ì œê³µ:</strong> ë²ˆì—­í•  í…ìŠ¤íŠ¸ì˜ ë°°ê²½ ì •ë³´ë¥¼ í¬í•¨í•˜ì„¸ìš”</li>
                        <li><strong>ì ì ˆí•œ í†¤ ì„ íƒ:</strong> ë¬¸ì„œì˜ ëª©ì ì— ë§ëŠ” í†¤ì„ ì„ íƒí•˜ì„¸ìš”</li>
                        <li><strong>ì‚°ì—… ë¶„ì•¼ ì§€ì •:</strong> ì „ë¬¸ ìš©ì–´ ë²ˆì—­ì˜ ì •í™•ë„ê°€ í–¥ìƒë©ë‹ˆë‹¤</li>
                        <li><strong>ë¬¸ë‹¨ ë‹¨ìœ„ ë²ˆì—­:</strong> ë„ˆë¬´ ê¸´ í…ìŠ¤íŠ¸ëŠ” ë¬¸ë‹¨ë³„ë¡œ ë‚˜ëˆ„ì–´ ë²ˆì—­í•˜ì„¸ìš”</li>
                        <li><strong>ê²€í†  ë° ìˆ˜ì •:</strong> ë²ˆì—­ ê²°ê³¼ë¥¼ í•­ìƒ ê²€í† í•˜ê³  í•„ìš”ì‹œ ìˆ˜ì •í•˜ì„¸ìš”</li>
                    </ul>
                </div>
            </details>

            <details>
                <summary>â“ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸</summary>
                <div class="guide-content">
                    <p><strong>Q: API í‚¤ëŠ” ì–´ë–»ê²Œ ë°œê¸‰ë°›ë‚˜ìš”?</strong></p>
                    <p>A: ê° ì„œë¹„ìŠ¤ ì œê³µì—…ì²´ì˜ ê³µì‹ ì›¹ì‚¬ì´íŠ¸ì—ì„œ ê³„ì •ì„ ìƒì„±í•˜ê³  API í‚¤ë¥¼ ë°œê¸‰ë°›ìœ¼ì„¸ìš”.</p>
                    
                    <p><strong>Q: ë²ˆì—­ ë¹„ìš©ì€ ì–¼ë§ˆë‚˜ ë“œë‚˜ìš”?</strong></p>
                    <p>A: ëª¨ë¸ë§ˆë‹¤ í† í°ë‹¹ ë¹„ìš©ì´ ë‹¤ë¦…ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ì§§ì€ í…ìŠ¤íŠ¸ëŠ” ë§¤ìš° ì €ë ´í•©ë‹ˆë‹¤.</p>
                    
                    <p><strong>Q: ì˜¤í”„ë¼ì¸ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‚˜ìš”?</strong></p>
                    <p>A: í˜„ì¬ëŠ” ì˜¨ë¼ì¸ APIë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ ì¸í„°ë„· ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>
                    
                    <p><strong>Q: ë²ˆì—­ ê²°ê³¼ê°€ ë§Œì¡±ìŠ¤ëŸ½ì§€ ì•Šë‹¤ë©´?</strong></p>
                    <p>A: ë‹¤ë¥¸ ëª¨ë¸ì„ ì‹œë„í•˜ê±°ë‚˜, í†¤ê³¼ ì‚°ì—… ë¶„ì•¼ë¥¼ ì¡°ì •í•´ ë³´ì„¸ìš”.</p>
                </div>
            </details>

            <details>
                <summary>ğŸ”’ ë³´ì•ˆ ë° ê°œì¸ì •ë³´ ë³´í˜¸</summary>
                <div class="guide-content">
                    <ul>
                        <li>ë²ˆì—­ ë°ì´í„°ëŠ” ë¸Œë¼ìš°ì €ì—ë§Œ ì €ì¥ë©ë‹ˆë‹¤</li>
                        <li>API í‚¤ëŠ” ë¡œì»¬ config.json íŒŒì¼ì—ë§Œ ë³´ê´€ë©ë‹ˆë‹¤</li>
                        <li>ë¯¼ê°í•œ ì •ë³´ ë²ˆì—­ ì‹œ ì£¼ì˜í•˜ì„¸ìš”</li>
                        <li>íˆìŠ¤í† ë¦¬ëŠ” ì–¸ì œë“  ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</li>
                        <li>ì„œë²„ì— ë°ì´í„°ê°€ ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤</li>
                    </ul>
                </div>
            </details>
        </div>
    </div>

    <input type="file" id="fileInput" accept=".txt,.docx,.pdf" style="display: none;" onchange="handleFileUpload(event)">

    <script>
        let config = null;
        let translationHistory = JSON.parse(localStorage.getItem('translationHistory') || '[]');
        let translationStats = JSON.parse(localStorage.getItem('translationStats') || '{"total": 0, "characters": 0, "today": 0}');
        let isTranslating = false;

        // ëª¨ë¸ë³„ ë¹„ìš© ì •ë³´ (í† í°ë‹¹ USD)
        const modelCosts = {
            'gpt-4': { input: 0.00003, output: 0.00006 },
            'gpt-3.5-turbo': { input: 0.000001, output: 0.000002 },
            'claude-3-5-sonnet-20241022': { input: 0.000003, output: 0.000015 },
            'claude-3-haiku-20240307': { input: 0.00000025, output: 0.00000125 },
            'gemini-pro': { input: 0.00000025, output: 0.0000005 }
        };

        // ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            loadConfig();
            updateCharCount();
            updateApiStatus();
            updateStats();
            loadSettings();
            
            // í…Œë§ˆ ì´ˆê¸°í™”
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            updateThemeToggle();

            // ì˜¤ëŠ˜ ë‚ ì§œ ì²´í¬
            checkDailyReset();
        });

        // ì¼ì¼ í†µê³„ ë¦¬ì…‹ ì²´í¬
        function checkDailyReset() {
            const today = new Date().toDateString();
            const lastDate = localStorage.getItem('lastDate');
            
            if (lastDate !== today) {
                translationStats.today = 0;
                localStorage.setItem('lastDate', today);
                saveStats();
            }
        }

        // ì„¤ì • íŒŒì¼ ë¡œë“œ
        async function loadConfig() {
            try {
                const response = await fetch('./config.json');
                if (!response.ok) {
                    throw new Error('config.json íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                }
                config = await response.json();
                populateModelSelect();
                updateApiStatus('ready');
            } catch (error) {
                showAlert('error', `ì„¤ì • íŒŒì¼ ë¡œë“œ ì‹¤íŒ¨: ${error.message}. ì„¤ì • ê°€ì´ë“œë¥¼ í™•ì¸í•˜ì„¸ìš”.`);
                updateApiStatus('error');
            }
        }

        // ëª¨ë¸ ì„ íƒ ì˜µì…˜ ìƒì„±
        function populateModelSelect() {
            const select = document.getElementById('modelSelect');
            select.innerHTML = '<option value="">ëª¨ë¸ì„ ì„ íƒí•˜ì„¸ìš”</option>';
            
            if (!config) return;

            Object.entries(config).forEach(([provider, data]) => {
                if (data.apiKey && data.models) {
                    data.models.forEach(model => {
                        const option = document.createElement('option');
                        option.value = `${provider}:${model}`;
                        option.textContent = `${provider.toUpperCase()} - ${model}`;
                        select.appendChild(option);
                    });
                }
            });
        }

        // ëª¨ë¸ ì •ë³´ ì—…ë°ì´íŠ¸
        function updateModelInfo() {
            const select = document.getElementById('modelSelect');
            const info = document.getElementById('modelInfo');
            
            if (!select.value) {
                info.textContent = '';
                return;
            }

            const [provider, model] = select.value.split(':');
            const modelInfo = getModelInfo(model);
            info.textContent = modelInfo;
            calculateCost();
        }

        function getModelInfo(model) {
            const infoMap = {
                'gpt-4': 'ìµœê³  í’ˆì§ˆ, ë³µì¡í•œ ë¬¸ì„œ ì²˜ë¦¬ì— ìµœì ',
                'gpt-3.5-turbo': 'ë¹ ë¥´ê³  íš¨ìœ¨ì , ì¼ë°˜ì ì¸ ë²ˆì—­ì— ì í•©',
                'claude-3-5-sonnet-20241022': 'ê¸´ ë¬¸ì„œì™€ ì°½ì˜ì  ë²ˆì—­ì— ìš°ìˆ˜',
                'claude-3-haiku-20240307': 'ë¹ ë¥¸ ì†ë„, ê°„ë‹¨í•œ í…ìŠ¤íŠ¸ì— ìµœì ',
                'gemini-pro': 'ë‹¤ì–‘í•œ ì–¸ì–´ ì§€ì›, ê· í˜•ì¡íŒ ì„±ëŠ¥'
            };
            return infoMap[model] || 'ëª¨ë¸ ì •ë³´ ì—†ìŒ';
        }

        // ë¹„ìš© ê³„ì‚°
        function calculateCost() {
            const text = document.getElementById('sourceText').value;
            const modelSelect = document.getElementById('modelSelect').value;
            const costElement = document.getElementById('costEstimate');

            if (!text || !modelSelect) {
                costElement.style.display = 'none';
                return;
            }

            const [provider, model] = modelSelect.split(':');
            const costs = modelCosts[model];
            
            if (!costs) {
                costElement.style.display = 'none';
                return;
            }

            // ëŒ€ëµì ì¸ í† í° ìˆ˜ ê³„ì‚° (1í† í° â‰ˆ 4ê¸€ì)
            const estimatedTokens = Math.ceil(text.length / 4);
            const estimatedCost = (estimatedTokens * costs.input) + (estimatedTokens * costs.output);
            
            costElement.textContent = `~$${estimatedCost.toFixed(4)}`;
            costElement.style.display = estimatedCost > 0.001 ? 'inline-block' : 'none';
        }

        // API ìƒíƒœ ì—…ë°ì´íŠ¸
        function updateApiStatus(status = 'error') {
            const indicator = document.getElementById('apiStatus');
            indicator.className = `status-indicator status-${status}`;
        }

        // í†µê³„ ì—…ë°ì´íŠ¸
        function updateStats() {
            document.getElementById('totalTranslations').textContent = translationStats.total.toLocaleString();
            document.getElementById('totalCharacters').textContent = translationStats.characters.toLocaleString();
            document.getElementById('todayTranslations').textContent = translationStats.today.toLocaleString();
            
            const avgLength = translationStats.total > 0 ? 
                Math.round(translationStats.characters / translationStats.total) : 0;
            document.getElementById('averageLength').textContent = avgLength.toLocaleString();
        }

        function saveStats() {
            localStorage.setItem('translationStats', JSON.stringify(translationStats));
            updateStats();
        }

        // ì„¤ì • ë¡œë“œ/ì €ì¥
        function loadSettings() {
            const settings = JSON.parse(localStorage.getItem('appSettings') || '{}');
            
            document.getElementById('autoSave').checked = settings.autoSave !== false;
            document.getElementById('soundNotification').checked = settings.soundNotification === true;
            document.getElementById('qualitySelect').value = settings.quality || 'balanced';
        }

        function saveSettings() {
            const settings = {
                autoSave: document.getElementById('autoSave').checked,
                soundNotification: document.getElementById('soundNotification').checked,
                quality: document.getElementById('qualitySelect').value
            };
            localStorage.setItem('appSettings', JSON.stringify(settings));
        }

        // ì„¤ì • ë³€ê²½ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        document.addEventListener('change', function(e) {
            if (['autoSave', 'soundNotification', 'qualitySelect'].includes(e.target.id)) {
                saveSettings();
            }
        });

        // ì•Œë¦¼ í‘œì‹œ (ê°œì„ ëœ ë²„ì „)
        function showAlert(type, message, duration = 5000) {
            const alertsContainer = document.getElementById('alerts');
            const alert = document.createElement('div');
            alert.className = `alert alert-${type}`;
            
            const icons = {
                error: 'âŒ',
                warning: 'âš ï¸',
                info: 'â„¹ï¸',
                success: 'âœ…'
            };
            
            alert.innerHTML = `
                <span>${icons[type] || 'â„¹ï¸'}</span>
                <span>${message}</span>
                <button class="alert-close" onclick="this.parentElement.remove()">&times;</button>
            `;
            
            alertsContainer.appendChild(alert);
            
            // ìë™ ì œê±°
            setTimeout(() => {
                if (alert.parentElement) {
                    alert.remove();
                }
            }, duration);

            // ì‚¬ìš´ë“œ ì•Œë¦¼
            if (document.getElementById('soundNotification').checked) {
                playNotificationSound(type);
            }
        }

        function playNotificationSound(type) {
            // Web Audio APIë¥¼ ì‚¬ìš©í•œ ê°„ë‹¨í•œ ì•Œë¦¼ìŒ
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();

            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            const frequencies = {
                success: 800,
                error: 400,
                warning: 600,
                info: 700
            };

            oscillator.frequency.value = frequencies[type] || 700;
            oscillator.type = 'sine';
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);

            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.3);
        }

        // ê¸€ì ìˆ˜ ë° ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
        function updateCharCount() {
            const sourceText = document.getElementById('sourceText').value;
            const targetText = document.getElementById('targetText').value;
            
            document.getElementById('sourceCount').textContent = `${sourceText.length.toLocaleString()}ì`;
            document.getElementById('targetCount').textContent = `${targetText.length.toLocaleString()}ì`;
            
            // ì§„í–‰ë¥  ë°” ì—…ë°ì´íŠ¸ (ìµœëŒ€ 5000ì ê¸°ì¤€)
            const maxChars = 5000;
            const sourceProgress = Math.min((sourceText.length / maxChars) * 100, 100);
            const targetProgress = Math.min((targetText.length / maxChars) * 100, 100);
            
            document.getElementById('sourceProgress').style.width = `${sourceProgress}%`;
            document.getElementById('targetProgress').style.width = `${targetProgress}%`;
        }

        // ë²ˆì—­ ì‹¤í–‰ (ê°œì„ ëœ ë²„ì „)
        async function translateText() {
            if (isTranslating) return;
            
            const sourceText = document.getElementById('sourceText').value.trim();
            const modelSelect = document.getElementById('modelSelect').value;
            
            if (!sourceText) {
                showAlert('warning', 'ë²ˆì—­í•  í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            if (!modelSelect) {
                showAlert('warning', 'AI ëª¨ë¸ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }
            
            if (!config) {
                showAlert('error', 'API ì„¤ì •ì„ ë¨¼ì € ë¡œë“œí•´ì£¼ì„¸ìš”.');
                return;
            }

            const [provider, model] = modelSelect.split(':');
            const translateBtn = document.getElementById('translateBtn');
            
            // ë¡œë”© ìƒíƒœ ì‹œì‘
            isTranslating = true;
            translateBtn.classList.add('loading');
            translateBtn.textContent = 'ë²ˆì—­ ì¤‘...';
            updateApiStatus('loading');
            
            const startTime = Date.now();
            
            try {
                const result = await callTranslationAPI(provider, model, sourceText);
                const endTime = Date.now();
                const duration = ((endTime - startTime) / 1000).toFixed(1);
                
                document.getElementById('targetText').value = result;
                updateCharCount();
                
                // í†µê³„ ì—…ë°ì´íŠ¸
                translationStats.total++;
                translationStats.today++;
                translationStats.characters += sourceText.length;
                saveStats();
                
                // íˆìŠ¤í† ë¦¬ì— ì¶”ê°€
                if (document.getElementById('autoSave').checked) {
                    addToHistory(sourceText, result, model, duration);
                }
                
                showAlert('success', `ë²ˆì—­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. (${duration}ì´ˆ)`);
                updateApiStatus('ready');
                
            } catch (error) {
                showAlert('error', `ë²ˆì—­ ì‹¤íŒ¨: ${error.message}`);
                updateApiStatus('error');
            } finally {
                isTranslating = false;
                translateBtn.classList.remove('loading');
                translateBtn.textContent = 'âœ¨ ë²ˆì—­í•˜ê¸°';
            }
        }

        // ë²ˆì—­ ê°œì„ 
        async function improveTranslation() {
            const targetText = document.getElementById('targetText').value.trim();
            const sourceText = document.getElementById('sourceText').value.trim();
            const modelSelect = document.getElementById('modelSelect').value;
            
            if (!targetText || !sourceText) {
                showAlert('warning', 'ê°œì„ í•  ë²ˆì—­ë¬¸ì´ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }

            if (!modelSelect) {
                showAlert('warning', 'AI ëª¨ë¸ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }

            const [provider, model] = modelSelect.split(':');
            
            try {
                const improvePrompt = `ë‹¤ìŒ ë²ˆì—­ì„ ë” ìì—°ìŠ¤ëŸ½ê³  ì •í™•í•˜ê²Œ ê°œì„ í•´ì£¼ì„¸ìš”:

ì›ë¬¸: ${sourceText}
ê¸°ì¡´ ë²ˆì—­: ${targetText}

ê°œì„ ëœ ë²ˆì—­:`;

                const improvedResult = await callTranslationAPI(provider, model, sourceText, improvePrompt);
                document.getElementById('targetText').value = improvedResult;
                updateCharCount();
                
                showAlert('success', 'ë²ˆì—­ì´ ê°œì„ ë˜ì—ˆìŠµë‹ˆë‹¤.');
                
            } catch (error) {
                showAlert('error', `ë²ˆì—­ ê°œì„  ì‹¤íŒ¨: ${error.message}`);
            }
        }

        // API í˜¸ì¶œ
        async function callTranslationAPI(provider, model, text, customPrompt = null) {
            const tone = document.getElementById('toneSelect').value;
            const industry = document.getElementById('industrySelect').value;
            const direction = document.getElementById('directionSelect').value;
            const quality = document.getElementById('qualitySelect').value;
            
            const prompt = customPrompt || generatePrompt(text, tone, industry, direction, quality);
            
            switch (provider) {
                case 'openai':
                    return await callOpenAI(model, prompt);
                case 'anthropic':
                    return await callAnthropic(model, prompt);
                case 'google':
                    return await callGoogle(model, prompt);
                default:
                    throw new Error('ì§€ì›í•˜ì§€ ì•ŠëŠ” ëª¨ë¸ì…ë‹ˆë‹¤.');
            }
        }

        // í”„ë¡¬í”„íŠ¸ ìƒì„± (ê°œì„ ëœ ë²„ì „)
        function generatePrompt(text, tone, industry, direction, quality) {
            const [sourceLang, targetLang] = direction.split('-');
            const languageMap = {
                'ko': 'í•œêµ­ì–´', 'en': 'ì˜ì–´', 'ja': 'ì¼ë³¸ì–´', 'zh': 'ì¤‘êµ­ì–´'
            };
            
            const sourceLanguage = languageMap[sourceLang];
            const targetLanguage = languageMap[targetLang];
            
            const toneMap = {
                'formal': 'ë§¤ìš° ê³µì‹ì ì´ê³  ê²©ì‹ìˆëŠ”',
                'business': 'ë¹„ì¦ˆë‹ˆìŠ¤ì— ì í•©í•œ ì „ë¬¸ì ì¸',
                'casual': 'ìì—°ìŠ¤ëŸ½ê³  ì¼ë°˜ì ì¸',
                'academic': 'í•™ìˆ ì ì´ê³  ì •í™•í•œ',
                'creative': 'ì°½ì˜ì ì´ê³  í‘œí˜„ë ¥ ìˆëŠ”'
            };
            
            const industryMap = {
                'general': 'ì¼ë°˜ì ì¸',
                'legal': 'ë²•ë¥  ë¶„ì•¼',
                'finance': 'ê¸ˆìœµ ë¶„ì•¼',
                'technology': 'ê¸°ìˆ /IT ë¶„ì•¼',
                'medical': 'ì˜ë£Œ ë¶„ì•¼',
                'marketing': 'ë§ˆì¼€íŒ… ë¶„ì•¼',
                'manufacturing': 'ì œì¡°ì—… ë¶„ì•¼',
                'education': 'êµìœ¡ ë¶„ì•¼'
            };

            const qualityMap = {
                'fast': 'ë¹ ë¥¸ ë²ˆì—­ì„ ìš°ì„ ì‹œí•˜ì—¬',
                'balanced': 'í’ˆì§ˆê³¼ ì†ë„ì˜ ê· í˜•ì„ ë§ì¶°',
                'high': 'ìµœê³  í’ˆì§ˆì„ ìœ„í•´ ì‹ ì¤‘í•˜ê²Œ'
            };
            
            return `ë‹¹ì‹ ì€ ì „ë¬¸ ë²ˆì—­ê°€ì…ë‹ˆë‹¤. ë‹¤ìŒ ${sourceLanguage} í…ìŠ¤íŠ¸ë¥¼ ${targetLanguage}ë¡œ ${qualityMap[quality]} ë²ˆì—­í•´ì£¼ì„¸ìš”.

ë²ˆì—­ ì¡°ê±´:
- í†¤: ${toneMap[tone]}
- ë¶„ì•¼: ${industryMap[industry]}
- ë¬¸ë§¥ê³¼ ë‰˜ì•™ìŠ¤ë¥¼ ì •í™•íˆ ì „ë‹¬
- ì „ë¬¸ ìš©ì–´ëŠ” í•´ë‹¹ ë¶„ì•¼ì˜ í‘œì¤€ ìš©ì–´ ì‚¬ìš©
- ìì—°ìŠ¤ëŸ½ê³  ì½ê¸° ì‰¬ìš´ ë²ˆì—­
- ì›ë¬¸ì˜ ì˜ë„ì™€ ê°ì •ì„ ë³´ì¡´

ì›ë¬¸:
${text}

ë²ˆì—­ë¬¸:`;
        }

        // OpenAI API í˜¸ì¶œ
        async function callOpenAI(model, prompt) {
            const response = await fetch('https://api.openai.com/v1/chat/completions', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${config.openai.apiKey}`
                },
                body: JSON.stringify({
                    model: model,
                    messages: [{ role: 'user', content: prompt }],
                    temperature: 0.3,
                    max_tokens: 4000
                })
            });
            
            if (!response.ok) {
                const errorData = await response.json().catch(() => ({}));
                throw new Error(`OpenAI API ì˜¤ë¥˜: ${response.status} - ${errorData.error?.message || 'Unknown error'}`);
            }
            
            const data = await response.json();
            return data.choices[0].message.content.trim();
        }

        // Anthropic API í˜¸ì¶œ
        async function callAnthropic(model, prompt) {
            const response = await fetch('https://api.anthropic.com/v1/messages', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'x-api-key': config.anthropic.apiKey,
                    'anthropic-version': '2023-06-01'
                },
                body: JSON.stringify({
                    model: model,
                    max_tokens: 4000,
                    messages: [{ role: 'user', content: prompt }],
                    temperature: 0.3
                })
            });
            
            if (!response.ok) {
                const errorData = await response.json().catch(() => ({}));
                throw new Error(`Anthropic API ì˜¤ë¥˜: ${response.status} - ${errorData.error?.message || 'Unknown error'}`);
            }
            
            const data = await response.json();
            return data.content[0].text.trim();
        }

        // Google API í˜¸ì¶œ
        async function callGoogle(model, prompt) {
            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${config.google.apiKey}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    contents: [{
                        parts: [{ text: prompt }]
                    }],
                    generationConfig: {
                        temperature: 0.3,
                        maxOutputTokens: 4000
                    }
                })
            });
            
            if (!response.ok) {
                const errorData = await response.json().catch(() => ({}));
                throw new Error(`Google API ì˜¤ë¥˜: ${response.status} - ${errorData.error?.message || 'Unknown error'}`);
            }
            
            const data = await response.json();
            return data.candidates[0].content.parts[0].text.trim();
        }

        // íˆìŠ¤í† ë¦¬ ê´€ë¦¬ (ê°œì„ ëœ ë²„ì „)
        function addToHistory(source, target, model, duration) {
            const historyItem = {
                id: Date.now(),
                timestamp: new Date().toLocaleString('ko-KR'),
                date: new Date().toISOString().split('T')[0],
                model: model,
                source: source,
                target: target,
                direction: document.getElementById('directionSelect').value,
                tone: document.getElementById('toneSelect').value,
                industry: document.getElementById('industrySelect').value,
                duration: duration,
                characters: source.length
            };
            
            translationHistory.unshift(historyItem);
            
            // ìµœëŒ€ 100ê°œ í•­ëª© ìœ ì§€
            if (translationHistory.length > 100) {
                translationHistory = translationHistory.slice(0, 100);
            }
            
            localStorage.setItem('translationHistory', JSON.stringify(translationHistory));
        }

        function toggleHistory() {
            const historyList = document.getElementById('historyList');
            const toggleBtn = document.getElementById('historyToggle');
            
            if (historyList.style.display === 'none') {
                displayHistory();
                historyList.style.display = 'block';
                toggleBtn.textContent = 'ğŸ“š íˆìŠ¤í† ë¦¬ ìˆ¨ê¸°ê¸°';
            } else {
                historyList.style.display = 'none';
                toggleBtn.textContent = 'ğŸ“š íˆìŠ¤í† ë¦¬ ë³´ê¸°';
            }
        }

        function displayHistory(filteredHistory = null) {
            const historyList = document.getElementById('historyList');
            const history = filteredHistory || translationHistory;
            
            if (history.length === 0) {
                historyList.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 20px;">ë²ˆì—­ íˆìŠ¤í† ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }
            
            historyList.innerHTML = history.map(item => `
                <div class="history-item">
                    <div class="history-meta">
                        <div class="history-tags">
                            <span class="tag">${item.model}</span>
                            <span class="tag">${item.direction}</span>
                            <span class="tag">${item.tone}</span>
                            <span class="tag">${item.industry}</span>
                        </div>
                        <div>
                            ${item.timestamp}
                            ${item.duration ? `(${item.duration}ì´ˆ)` : ''}
                            <button class="btn-icon" onclick="useHistoryItem(${item.id})" title="ë‹¤ì‹œ ì‚¬ìš©" style="margin-left: 8px;">â†©ï¸</button>
                            <button class="btn-icon" onclick="deleteHistoryItem(${item.id})" title="ì‚­ì œ" style="margin-left: 4px;">ğŸ—‘ï¸</button>
                        </div>
                    </div>
                    <div class="history-content">
                        <div class="history-text">
                            <strong>ì›ë¬¸ (${item.characters}ì):</strong><br>
                            ${item.source.length > 200 ? item.source.substring(0, 200) + '...' : item.source}
                        </div>
                        <div class="history-text">
                            <strong>ë²ˆì—­ë¬¸:</strong><br>
                            ${item.target.length > 200 ? item.target.substring(0, 200) + '...' : item.target}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function useHistoryItem(id) {
            const item = translationHistory.find(h => h.id === id);
            if (item) {
                document.getElementById('sourceText').value = item.source;
                document.getElementById('targetText').value = item.target;
                document.getElementById('directionSelect').value = item.direction;
                document.getElementById('toneSelect').value = item.tone;
                document.getElementById('industrySelect').value = item.industry;
                updateCharCount();
                showAlert('success', 'íˆìŠ¤í† ë¦¬ í•­ëª©ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤.');
                
                // í˜ì´ì§€ ìƒë‹¨ìœ¼ë¡œ ìŠ¤í¬ë¡¤
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function deleteHistoryItem(id) {
            if (confirm('ì´ íˆìŠ¤í† ë¦¬ í•­ëª©ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                translationHistory = translationHistory.filter(h => h.id !== id);
                localStorage.setItem('translationHistory', JSON.stringify(translationHistory));
                displayHistory();
                showAlert('info', 'íˆìŠ¤í† ë¦¬ í•­ëª©ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
            }
        }

        function searchHistory() {
            const searchInput = document.getElementById('historySearch');
            searchInput.style.display = searchInput.style.display === 'none' ? 'block' : 'none';
            if (searchInput.style.display === 'block') {
                searchInput.focus();
            }
        }

        function filterHistory() {
            const searchTerm = document.getElementById('historySearch').value.toLowerCase();
            if (!searchTerm) {
                displayHistory();
                return;
            }
            
            const filtered = translationHistory.filter(item => 
                item.source.toLowerCase().includes(searchTerm) ||
                item.target.toLowerCase().includes(searchTerm) ||
                item.model.toLowerCase().includes(searchTerm) ||
                item.industry.toLowerCase().includes(searchTerm)
            );
            
            displayHistory(filtered);
        }

        function clearHistory() {
            if (confirm('ëª¨ë“  ë²ˆì—­ íˆìŠ¤í† ë¦¬ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
                translationHistory = [];
                localStorage.removeItem('translationHistory');
                displayHistory();
                showAlert('info', 'ëª¨ë“  íˆìŠ¤í† ë¦¬ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
            }
        }

        function exportHistory() {
            if (translationHistory.length === 0) {
                showAlert('warning', 'ë‚´ë³´ë‚¼ íˆìŠ¤í† ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            const data = translationHistory.map(item => ({
                ë‚ ì§œ: item.timestamp,
                ëª¨ë¸: item.model,
                ë°©í–¥: item.direction,
                í†¤: item.tone,
                ë¶„ì•¼: item.industry,
                ì†Œìš”ì‹œê°„: item.duration ? `${item.duration}ì´ˆ` : '',
                ê¸€ììˆ˜: item.characters,
                ì›ë¬¸: item.source,
                ë²ˆì—­ë¬¸: item.target
            }));
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json;charset=utf-8' });
            downloadFile(blob, `translation_history_${new Date().toISOString().split('T')[0]}.json`);
            
            showAlert('success', 'íˆìŠ¤í† ë¦¬ê°€ ë‚´ë³´ë‚´ê¸° ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        // íŒŒì¼ ì—…ë¡œë“œ
        function uploadFile() {
            document.getElementById('fileInput').click();
        }

        async function handleFileUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            try {
                let text = '';
                
                if (file.type === 'text/plain') {
                    text = await file.text();
                } else {
                    showAlert('warning', 'í˜„ì¬ëŠ” í…ìŠ¤íŠ¸ íŒŒì¼(.txt)ë§Œ ì§€ì›ë©ë‹ˆë‹¤.');
                    return;
                }
                
                document.getElementById('sourceText').value = text;
                updateCharCount();
                calculateCost();
                showAlert('success', 'íŒŒì¼ì´ ì„±ê³µì ìœ¼ë¡œ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.');
                
            } catch (error) {
                showAlert('error', `íŒŒì¼ ì—…ë¡œë“œ ì‹¤íŒ¨: ${error.message}`);
            }
        }

        // ê³µìœ  ê¸°ëŠ¥
        async function shareTranslation() {
            const source = document.getElementById('sourceText').value;
            const target = document.getElementById('targetText').value;
            
            if (!source.trim() || !target.trim()) {
                showAlert('warning', 'ê³µìœ í•  ë²ˆì—­ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            const shareData = {
                title: 'AI ë²ˆì—­ ê²°ê³¼',
                text: `ì›ë¬¸: ${source}\n\në²ˆì—­: ${target}`,
            };
            
            try {
                if (navigator.share) {
                    await navigator.share(shareData);
                    showAlert('success', 'ë²ˆì—­ ê²°ê³¼ê°€ ê³µìœ ë˜ì—ˆìŠµë‹ˆë‹¤.');
                } else {
                    // í´ë¦½ë³´ë“œì— ë³µì‚¬
                    await navigator.clipboard.writeText(shareData.text);
                    showAlert('info', 'ë²ˆì—­ ê²°ê³¼ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                showAlert('error', 'ê³µìœ ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
        function clearSource() {
            if (confirm('ì›ë¬¸ì„ ëª¨ë‘ ì§€ìš°ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                document.getElementById('sourceText').value = '';
                updateCharCount();
                calculateCost();
            }
        }

        async function copyText(elementId) {
            const text = document.getElementById(elementId).value;
            if (!text.trim()) {
                showAlert('warning', 'ë³µì‚¬í•  í…ìŠ¤íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            try {
                await navigator.clipboard.writeText(text);
                showAlert('success', 'í…ìŠ¤íŠ¸ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
            } catch (error) {
                showAlert('error', 'ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        }

        async function pasteText(elementId) {
            try {
                const text = await navigator.clipboard.readText();
                document.getElementById(elementId).value = text;
                updateCharCount();
                calculateCost();
                showAlert('success', 'í…ìŠ¤íŠ¸ê°€ ë¶™ì—¬ë„£ì–´ì¡ŒìŠµë‹ˆë‹¤.');
            } catch (error) {
                showAlert('error', 'ë¶™ì—¬ë„£ê¸°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        }

        function exportTranslation() {
            const source = document.getElementById('sourceText').value;
            const target = document.getElementById('targetText').value;
            
            if (!source.trim() || !target.trim()) {
                showAlert('warning', 'ë‚´ë³´ë‚¼ ë²ˆì—­ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            const content = `AI ë²ˆì—­ ê²°ê³¼ - ${new Date().toLocaleString('ko-KR')}

ì„¤ì •:
- ëª¨ë¸: ${document.getElementById('modelSelect').value}
- í†¤: ${document.getElementById('toneSelect').value}
- ë¶„ì•¼: ${document.getElementById('industrySelect').value}
- ë°©í–¥: ${document.getElementById('directionSelect').value}

ì›ë¬¸ (${source.length}ì):
${source}

ë²ˆì—­ë¬¸ (${target.length}ì):
${target}`;
            
            const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
            downloadFile(blob, `translation_${new Date().toISOString().split('T')[0]}.txt`);
            
            showAlert('success', 'ë²ˆì—­ ê²°ê³¼ê°€ ë‚´ë³´ë‚´ê¸° ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        function swapTexts() {
            const sourceText = document.getElementById('sourceText');
            const targetText = document.getElementById('targetText');
            const direction = document.getElementById('directionSelect');
            
            // í…ìŠ¤íŠ¸ êµì²´
            const temp = sourceText.value;
            sourceText.value = targetText.value;
            targetText.value = temp;
            
            // ë°©í–¥ êµì²´
            const directionMap = {
                'ko-en': 'en-ko',
                'en-ko': 'ko-en',
                'ko-ja': 'ja-ko',
                'ja-ko': 'ko-ja',
                'ko-zh': 'zh-ko',
                'zh-ko': 'ko-zh'
            };
            
            direction.value = directionMap[direction.value] || direction.value;
            
            updateCharCount();
            calculateCost();
            showAlert('info', 'ì›ë¬¸ê³¼ ë²ˆì—­ë¬¸ì´ êµì²´ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        function downloadFile(blob, filename) {
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeToggle();
        }

        function updateThemeToggle() {
            const themeToggle = document.querySelector('.theme-toggle');
            const currentTheme = document.documentElement.getAttribute('data-theme');
            themeToggle.textContent = currentTheme === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
        }

        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function toggleShortcuts() {
            const shortcuts = document.getElementById('shortcuts');
            shortcuts.classList.toggle('show');
        }

        // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ (í™•ì¥ëœ ë²„ì „)
        document.addEventListener('keydown', function(e) {
            // Ctrl/Cmd + í‚¤ ì¡°í•©
            if (e.ctrlKey || e.metaKey) {
                switch(e.key) {
                    case 'Enter':
                        e.preventDefault();
                        if (!isTranslating) translateText();
                        break;
                    case 'r':
                        e.preventDefault();
                        swapTexts();
                        break;
                    case 'Delete':
                        e.preventDefault();
                        clearSource();
                        break;
                    case 's':
                        e.preventDefault();
                        exportTranslation();
                        break;
                }
            }
            
            // Alt + í‚¤ ì¡°í•©
            if (e.altKey) {
                switch(e.key) {
                    case 't':
                        e.preventDefault();
                        toggleTheme();
                        break;
                    case 'h':
                        e.preventDefault();
                        toggleHistory();
                        break;
                }
            }
            
            // F í‚¤ë“¤
            switch(e.key) {
                case 'F1':
                    e.preventDefault();
                    toggleShortcuts();
                    break;
                case 'Escape':
                    document.getElementById('shortcuts').classList.remove('show');
                    break;
            }
        });

        // í˜ì´ì§€ ì–¸ë¡œë“œ ì‹œ ì„¤ì • ì €ì¥
        window.addEventListener('beforeunload', function() {
            saveSettings();
        });

        // ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
        let performanceData = {
            translationTimes: [],
            errorCount: 0,
            successCount: 0
        };

        function trackPerformance(duration, success) {
            if (success) {
                performanceData.successCount++;
                performanceData.translationTimes.push(duration);
            } else {
                performanceData.errorCount++;
            }
            
            // ìµœê·¼ 10ê°œ ë²ˆì—­ ì‹œê°„ë§Œ ìœ ì§€
            if (performanceData.translationTimes.length > 10) {
                performanceData.translationTimes.shift();
            }
        }

        // ì ‘ê·¼ì„± ê°œì„ 
        document.addEventListener('DOMContentLoaded', function() {
            // í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ ê°œì„ 
            const focusableElements = 'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';
            const firstFocusable = document.querySelector(focusableElements);
            
            // í˜ì´ì§€ ë¡œë“œ ì‹œ ì²« ë²ˆì§¸ ìš”ì†Œì— í¬ì»¤ìŠ¤
            if (firstFocusable) {
                firstFocusable.focus();
            }
        });
    </script>
</body>
</html>
