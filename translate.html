<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ÎπÑÏ¶àÎãàÏä§ Î≤àÏó≠Í∏∞ Pro</title>
    <style>
        :root {
            --primary-color: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary-color: #64748b;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
            --bg-color: #ffffff;
            --surface-color: #f8fafc;
            --surface-hover: #f1f5f9;
            --text-color: #1e293b;
            --text-secondary: #64748b;
            --text-muted: #94a3b8;
            --border-color: #e2e8f0;
            --border-focus: #3b82f6;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 10px 10px -5px rgb(0 0 0 / 0.04);
            --radius: 8px;
            --radius-lg: 12px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        [data-theme="dark"] {
            --bg-color: #0f172a;
            --surface-color: #1e293b;
            --surface-hover: #334155;
            --text-color: #f1f5f9;
            --text-secondary: #cbd5e1;
            --text-muted: #94a3b8;
            --border-color: #334155;
            --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.3), 0 1px 2px -1px rgb(0 0 0 / 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, var(--bg-color) 0%, var(--surface-color) 100%);
            color: var(--text-color);
            line-height: 1.6;
            transition: var(--transition);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: var(--surface-color);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--success-color));
        }

        .header h1 {
            background: linear-gradient(135deg, var(--primary-color), var(--success-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 12px;
            font-size: 2.8rem;
            font-weight: 700;
            letter-spacing: -0.02em;
        }

        .header p {
            color: var(--text-secondary);
            font-size: 1.2rem;
            max-width: 600px;
            margin: 0 auto;
        }

        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
            margin-bottom: 40px;
        }

        .control-group {
            background: var(--surface-color);
            padding: 24px;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            transition: var(--transition);
            position: relative;
        }

        .control-group:hover {
            box-shadow: var(--shadow-lg);
            transform: translateY(-2px);
        }

        .control-group label {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            font-weight: 600;
            color: var(--text-color);
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .control-icon {
            margin-right: 8px;
            font-size: 1.2rem;
        }

        select, input, textarea {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid var(--border-color);
            border-radius: var(--radius);
            background: var(--bg-color);
            color: var(--text-color);
            font-size: 16px;
            font-family: inherit;
            transition: var(--transition);
            outline: none;
        }

        select:hover, input:hover, textarea:hover {
            border-color: var(--primary-color);
        }

        select:focus, input:focus, textarea:focus {
            border-color: var(--border-focus);
            box-shadow: 0 0 0 3px rgb(59 130 246 / 0.1);
        }

        .translation-area {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 24px;
            margin-bottom: 40px;
            align-items: start;
        }

        .swap-button {
            align-self: center;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.2rem;
            transition: var(--transition);
            box-shadow: var(--shadow);
        }

        .swap-button:hover {
            background: var(--primary-dark);
            transform: rotate(180deg) scale(1.1);
        }

        .text-panel {
            background: var(--surface-color);
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-color);
            transition: var(--transition);
        }

        .text-panel:hover {
            box-shadow: var(--shadow-xl);
        }

        .panel-header {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            padding: 20px 24px;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
        }

        .panel-title {
            display: flex;
            align-items: center;
            font-size: 1.1rem;
        }

        .panel-title::before {
            content: 'üìù';
            margin-right: 8px;
        }

        .panel-header.target .panel-title::before {
            content: '‚ú®';
        }

        .char-count {
            font-size: 0.9rem;
            opacity: 0.9;
            background: rgba(255, 255, 255, 0.2);
            padding: 4px 8px;
            border-radius: 12px;
            font-weight: 500;
        }

        .panel-content {
            padding: 24px;
        }

        .textarea-container {
            position: relative;
        }

        textarea {
            min-height: 320px;
            resize: vertical;
            border: none;
            background: transparent;
            font-family: 'SF Mono', Monaco, Consolas, monospace;
            line-height: 1.7;
        }

        .textarea-placeholder {
            position: absolute;
            top: 14px;
            left: 16px;
            color: var(--text-muted);
            pointer-events: none;
            transition: var(--transition);
            font-style: italic;
        }

        textarea:focus + .textarea-placeholder,
        textarea:not(:placeholder-shown) + .textarea-placeholder {
            opacity: 0;
            transform: translateY(-10px);
        }

        .button-group {
            display: flex;
            gap: 12px;
            margin-top: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        button {
            padding: 12px 24px;
            border: none;
            border-radius: var(--radius);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
            font-family: inherit;
            position: relative;
            overflow: hidden;
        }

        button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s;
        }

        button:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            box-shadow: var(--shadow);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-secondary {
            background: var(--secondary-color);
            color: white;
        }

        .btn-secondary:hover {
            background: #475569;
            transform: translateY(-1px);
        }

        .btn-success {
            background: var(--success-color);
            color: white;
        }

        .btn-success:hover {
            background: #059669;
        }

        .btn-icon {
            background: var(--surface-color);
            border: 2px solid var(--border-color);
            color: var(--text-color);
            padding: 10px;
            border-radius: var(--radius);
            min-width: 44px;
            justify-content: center;
        }

        .btn-icon:hover {
            background: var(--surface-hover);
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        .loading {
            opacity: 0.8;
            pointer-events: none;
            position: relative;
        }

        .loading::after {
            content: '';
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            border: 2px solid transparent;
            border-top: 2px solid currentColor;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: translateY(-50%) rotate(360deg); }
        }

        .main-translate-btn {
            grid-column: 1 / -1;
            padding: 16px 32px;
            font-size: 1.1rem;
            border-radius: var(--radius-lg);
            background: linear-gradient(135deg, var(--primary-color), var(--success-color));
            color: white;
            box-shadow: var(--shadow-lg);
            margin: 20px 0;
        }

        .main-translate-btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-xl);
        }

        .history-panel, .stats-panel, .settings-panel {
            background: var(--surface-color);
            border-radius: var(--radius-lg);
            padding: 28px;
            margin-bottom: 32px;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-color);
        }

        .panel-title-main {
            display: flex;
            align-items: center;
            margin-bottom: 24px;
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--text-color);
        }

        .panel-title-main::before {
            content: 'üìä';
            margin-right: 12px;
            font-size: 1.5rem;
        }

        .history-panel .panel-title-main::before { content: 'üìö'; }
        .settings-panel .panel-title-main::before { content: '‚öôÔ∏è'; }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 24px;
        }

        .stat-card {
            background: var(--bg-color);
            padding: 20px;
            border-radius: var(--radius);
            text-align: center;
            border: 1px solid var(--border-color);
            transition: var(--transition);
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
            display: block;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-top: 4px;
        }

        .history-item {
            background: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 16px;
            transition: var(--transition);
        }

        .history-item:hover {
            box-shadow: var(--shadow);
            border-color: var(--primary-color);
        }

        .history-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .history-tags {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .tag {
            background: var(--primary-color);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .history-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .history-text {
            padding: 12px;
            background: var(--surface-color);
            border-radius: var(--radius);
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .theme-toggle {
            position: fixed;
            top: 24px;
            right: 24px;
            z-index: 1000;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: var(--surface-color);
            border: 2px solid var(--border-color);
            color: var(--text-color);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            transition: var(--transition);
            box-shadow: var(--shadow-lg);
        }

        .theme-toggle:hover {
            transform: scale(1.1) rotate(15deg);
            box-shadow: var(--shadow-xl);
        }

        .alert {
            padding: 16px 20px;
            border-radius: var(--radius);
            margin-bottom: 24px;
            border: 1px solid;
            display: flex;
            align-items: center;
            gap: 12px;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .alert-error {
            background: #fef2f2;
            color: #991b1b;
            border-color: #fecaca;
        }

        .alert-warning {
            background: #fffbeb;
            color: #92400e;
            border-color: #fed7aa;
        }

        .alert-info {
            background: #eff6ff;
            color: #1e40af;
            border-color: #bfdbfe;
        }

        .alert-success {
            background: #f0fdf4;
            color: #166534;
            border-color: #bbf7d0;
        }

        [data-theme="dark"] .alert-error {
            background: #450a0a;
            color: #fca5a5;
            border-color: #7f1d1d;
        }

        [data-theme="dark"] .alert-warning {
            background: #451a03;
            color: #fbbf24;
            border-color: #92400e;
        }

        [data-theme="dark"] .alert-info {
            background: #1e3a8a;
            color: #93c5fd;
            border-color: #3730a3;
        }

        [data-theme="dark"] .alert-success {
            background: #14532d;
            color: #86efac;
            border-color: #166534;
        }

        .alert-close {
            margin-left: auto;
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            color: inherit;
            padding: 0;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: var(--transition);
        }

        .alert-close:hover {
            background: rgba(0, 0, 0, 0.1);
        }

        .guide-section {
            background: var(--surface-color);
            border-radius: var(--radius-lg);
            padding: 28px;
            margin-top: 40px;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-color);
        }

        .guide-section h3 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 1.4rem;
            display: flex;
            align-items: center;
        }

        .guide-section h3::before {
            content: 'üìñ';
            margin-right: 12px;
        }

        .guide-section details {
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            overflow: hidden;
        }

        .guide-section summary {
            cursor: pointer;
            font-weight: 600;
            padding: 16px 20px;
            background: var(--bg-color);
            border-bottom: 1px solid var(--border-color);
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .guide-section summary:hover {
            background: var(--surface-hover);
        }

        .guide-section details[open] summary {
            background: var(--primary-color);
            color: white;
        }

        .guide-content {
            padding: 20px;
        }

        .guide-section pre {
            background: var(--bg-color);
            padding: 20px;
            border-radius: var(--radius);
            overflow-x: auto;
            font-size: 0.9rem;
            border: 1px solid var(--border-color);
            margin: 12px 0;
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background: var(--border-color);
            border-radius: 2px;
            overflow: hidden;
            margin: 16px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--success-color));
            transition: width 0.3s ease;
            width: 0%;
        }

        .floating-actions {
            position: fixed;
            bottom: 24px;
            right: 24px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            z-index: 1000;
        }

        .fab {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            box-shadow: var(--shadow-lg);
            transition: var(--transition);
        }

        .fab:hover {
            transform: scale(1.1);
            box-shadow: var(--shadow-xl);
        }

        @media (max-width: 1024px) {
            .translation-area {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .swap-button {
                justify-self: center;
                transform: rotate(90deg);
            }
            
            .controls {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 16px;
            }
            
            .header h1 {
                font-size: 2.2rem;
            }
            
            .controls {
                grid-template-columns: 1fr;
            }
            
            .button-group {
                justify-content: center;
            }
            
            .history-content {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }
            
            .theme-toggle {
                top: 16px;
                right: 16px;
                width: 48px;
                height: 48px;
            }
            
            .floating-actions {
                bottom: 16px;
                right: 16px;
            }
            
            .fab {
                width: 48px;
                height: 48px;
                font-size: 1.1rem;
            }
        }

        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-ready {
            background: var(--success-color);
            box-shadow: 0 0 6px var(--success-color);
        }

        .status-error {
            background: var(--error-color);
            box-shadow: 0 0 6px var(--error-color);
        }

        .status-loading {
            background: var(--warning-color);
            animation: pulse 2s infinite;
            box-shadow: 0 0 6px var(--warning-color);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.1); }
        }

        .model-info {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 4px;
            font-style: italic;
        }

        .cost-estimate {
            background: var(--warning-color);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
            margin-left: 8px;
        }

        .keyboard-shortcuts {
            position: fixed;
            bottom: 100px;
            right: 24px;
            background: var(--surface-color);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            padding: 12px;
            font-size: 0.8rem;
            color: var(--text-secondary);
            opacity: 0;
            transform: translateX(100%);
            transition: var(--transition);
            z-index: 1000;
        }

        .keyboard-shortcuts.show {
            opacity: 1;
            transform: translateX(0);
        }

        .shortcut {
            display: flex;
            justify-content: space-between;
            margin-bottom: 4px;
        }

        .shortcut-key {
            background: var(--bg-color);
            padding: 2px 6px;
            border-radius: 3px;
            font-family: monospace;
            font-size: 0.75rem;
        }
    </style>
</head>
<body>
    <button class="theme-toggle" onclick="toggleTheme()" title="ÌÖåÎßà Ï†ÑÌôò (Alt+T)">
        üåô
    </button>

    <div class="keyboard-shortcuts" id="shortcuts">
        <div class="shortcut">
            <span>Î≤àÏó≠</span>
            <span class="shortcut-key">Ctrl+Enter</span>
        </div>
        <div class="shortcut">
            <span>ÌÖçÏä§Ìä∏ ÍµêÏ≤¥</span>
            <span class="shortcut-key">Ctrl+R</span>
        </div>
        <div class="shortcut">
            <span>Î≥µÏÇ¨</span>
            <span class="shortcut-key">Ctrl+C</span>
        </div>
        <div class="shortcut">
            <span>ÌÖåÎßà Ï†ÑÌôò</span>
            <span class="shortcut-key">Alt+T</span>
        </div>
    </div>

    <div class="floating-actions">
        <button class="fab" onclick="scrollToTop()" title="Îß® ÏúÑÎ°ú">‚Üë</button>
        <button class="fab" onclick="toggleShortcuts()" title="Îã®Ï∂ïÌÇ§ Î≥¥Í∏∞">‚å®Ô∏è</button>
    </div>

    <div class="container">
        <header class="header">
            <h1>AI ÎπÑÏ¶àÎãàÏä§ Î≤àÏó≠Í∏∞ Pro</h1>
            <p>Ï†ÑÎ¨∏Ï†ÅÏù∏ ÎπÑÏ¶àÎãàÏä§ Î¨∏ÏÑú Î≤àÏó≠ÏùÑ ÏúÑÌïú Ï∞®ÏÑ∏ÎåÄ AI Í∏∞Î∞ò ÏÜîÎ£®ÏÖò</p>
        </header>

        <div id="alerts"></div>

        <div class="controls">
            <div class="control-group">
                <label for="modelSelect">
                    <span class="control-icon">ü§ñ</span>
                    <span class="status-indicator" id="apiStatus"></span>
                    AI Î™®Îç∏ ÏÑ†ÌÉù
                </label>
                <select id="modelSelect" onchange="updateModelInfo()">
                    <option value="">Î™®Îç∏ÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>
                </select>
                <div class="model-info" id="modelInfo"></div>
            </div>

            <div class="control-group">
                <label for="toneSelect">
                    <span class="control-icon">üé≠</span>
                    Î≤àÏó≠ ÌÜ§
                </label>
                <select id="toneSelect">
                    <option value="formal">Í≥µÏãùÏ†Å (Formal)</option>
                    <option value="business" selected>ÎπÑÏ¶àÎãàÏä§ (Business)</option>
                    <option value="casual">ÏùºÎ∞òÏ†Å (Casual)</option>
                    <option value="academic">ÌïôÏà†Ï†Å (Academic)</option>
                    <option value="creative">Ï∞ΩÏùòÏ†Å (Creative)</option>
                </select>
            </div>

            <div class="control-group">
                <label for="industrySelect">
                    <span class="control-icon">üè¢</span>
                    ÏÇ∞ÏóÖ Î∂ÑÏïº
                </label>
                <select id="industrySelect">
                    <option value="general">ÏùºÎ∞ò</option>
                    <option value="legal">Î≤ïÎ•†</option>
                    <option value="finance">Í∏àÏúµ</option>
                    <option value="technology">Í∏∞Ïà†/IT</option>
                    <option value="medical">ÏùòÎ£å</option>
                    <option value="marketing">ÎßàÏºÄÌåÖ</option>
                    <option value="manufacturing">Ï†úÏ°∞ÏóÖ</option>
                    <option value="education">ÍµêÏú°</option>
                </select>
            </div>

            <div class="control-group">
                <label for="directionSelect">
                    <span class="control-icon">üîÑ</span>
                    Î≤àÏó≠ Î∞©Ìñ•
                </label>
                <select id="directionSelect">
                    <option value="ko-en">ÌïúÍµ≠Ïñ¥ ‚Üí ÏòÅÏñ¥</option>
                    <option value="en-ko">ÏòÅÏñ¥ ‚Üí ÌïúÍµ≠Ïñ¥</option>
                    <option value="ko-ja">ÌïúÍµ≠Ïñ¥ ‚Üí ÏùºÎ≥∏Ïñ¥</option>
                    <option value="ja-ko">ÏùºÎ≥∏Ïñ¥ ‚Üí ÌïúÍµ≠Ïñ¥</option>
                    <option value="ko-zh">ÌïúÍµ≠Ïñ¥ ‚Üí Ï§ëÍµ≠Ïñ¥</option>
                    <option value="zh-ko">Ï§ëÍµ≠Ïñ¥ ‚Üí ÌïúÍµ≠Ïñ¥</option>
                </select>
            </div>
        </div>

        <div class="translation-area">
            <div class="text-panel">
                <div class="panel-header">
                    <div class="panel-title">ÏõêÎ¨∏</div>
                    <div class="char-count" id="sourceCount">0Ïûê</div>
                </div>
                <div class="panel-content">
                    <div class="textarea-container">
                        <textarea 
                            id="sourceText" 
                            placeholder=""
                            oninput="updateCharCount(); calculateCost()"></textarea>
                        <div class="textarea-placeholder">Î≤àÏó≠Ìï† ÌÖçÏä§Ìä∏Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî...</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="sourceProgress"></div>
                    </div>
                    <div class="button-group">
                        <button class="btn-icon" onclick="clearSource()" title="ÏßÄÏö∞Í∏∞ (Ctrl+Del)">üóëÔ∏è</button>
                        <button class="btn-icon" onclick="copyText('sourceText')" title="Î≥µÏÇ¨ (Ctrl+C)">üìã</button>
                        <button class="btn-icon" onclick="pasteText('sourceText')" title="Î∂ôÏó¨ÎÑ£Í∏∞ (Ctrl+V)">üìÑ</button>
                        <button class="btn-icon" onclick="uploadFile()" title="ÌååÏùº ÏóÖÎ°úÎìú">üìÅ</button>
                    </div>
                </div>
            </div>

            <button class="swap-button" onclick="swapTexts()" title="ÌÖçÏä§Ìä∏ ÍµêÏ≤¥ (Ctrl+R)">
                üîÑ
            </button>

            <div class="text-panel">
                <div class="panel-header target">
                    <div class="panel-title">Î≤àÏó≠Î¨∏</div>
                    <div style="display: flex; align-items: center;">
                        <div class="char-count" id="targetCount">0Ïûê</div>
                        <div class="cost-estimate" id="costEstimate" style="display: none;">$0.00</div>
                    </div>
                </div>
                <div class="panel-content">
                    <div class="textarea-container">
                        <textarea 
                            id="targetText" 
                            placeholder=""
                            readonly
                            oninput="updateCharCount()"></textarea>
                        <div class="textarea-placeholder">Î≤àÏó≠ Í≤∞Í≥ºÍ∞Ä Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§...</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="targetProgress"></div>
                    </div>
                    <div class="button-group">
                        <button class="btn-primary main-translate-btn" onclick="translateText()" id="translateBtn">
                            ‚ú® Î≤àÏó≠ÌïòÍ∏∞
                        </button>
                        <button class="btn-icon" onclick="copyText('targetText')" title="Î≥µÏÇ¨">üìã</button>
                        <button class="btn-icon" onclick="exportTranslation()" title="ÎÇ¥Î≥¥ÎÇ¥Í∏∞">üíæ</button>
                        <button class="btn-icon" onclick="shareTranslation()" title="Í≥µÏú†">üì§</button>
                        <button class="btn-secondary" onclick="improveTranslation()" title="Î≤àÏó≠ Í∞úÏÑ†">üéØ</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="stats-panel">
            <div class="panel-title-main">Î≤àÏó≠ ÌÜµÍ≥Ñ</div>
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-number" id="totalTranslations">0</span>
                    <div class="stat-label">Ï¥ù Î≤àÏó≠ Ïàò</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="totalCharacters">0</span>
                    <div class="stat-label">Î≤àÏó≠Îêú Í∏ÄÏûê Ïàò</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="todayTranslations">0</span>
                    <div class="stat-label">Ïò§Îäò Î≤àÏó≠ Ïàò</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="averageLength">0</span>
                    <div class="stat-label">ÌèâÍ∑† Í∏∏Ïù¥</div>
                </div>
            </div>
        </div>

        <div class="history-panel">
            <div class="panel-title-main">Î≤àÏó≠ ÌûàÏä§ÌÜ†Î¶¨</div>
            <div style="margin-bottom: 20px;">
                <button class="btn-secondary" onclick="toggleHistory()" id="historyToggle">
                    üìö ÌûàÏä§ÌÜ†Î¶¨ Î≥¥Í∏∞
                </button>
                <button class="btn-secondary" onclick="clearHistory()">
                    üóëÔ∏è ÌûàÏä§ÌÜ†Î¶¨ ÏÇ≠Ï†ú
                </button>
                <button class="btn-success" onclick="exportHistory()">
                    üíæ ÌûàÏä§ÌÜ†Î¶¨ ÎÇ¥Î≥¥ÎÇ¥Í∏∞
                </button>
                <button class="btn-icon" onclick="searchHistory()" title="ÌûàÏä§ÌÜ†Î¶¨ Í≤ÄÏÉâ">üîç</button>
            </div>
            <input type="text" id="historySearch" placeholder="ÌûàÏä§ÌÜ†Î¶¨ Í≤ÄÏÉâ..." style="margin-bottom: 16px; display: none;" oninput="filterHistory()">
            <div id="historyList" style="display: none;"></div>
        </div>

        <div class="settings-panel">
            <div class="panel-title-main">ÏÑ§Ï†ï</div>
            <div class="controls">
                <div class="control-group">
                    <label>
                        <span class="control-icon">üîß</span>
                        ÏûêÎèô Ï†ÄÏû•
                    </label>
                    <label style="display: flex; align-items: center; margin-top: 8px;">
                        <input type="checkbox" id="autoSave" checked style="width: auto; margin-right: 8px;">
                        Î≤àÏó≠ Í≤∞Í≥º ÏûêÎèô Ï†ÄÏû•
                    </label>
                </div>
                <div class="control-group">
                    <label>
                        <span class="control-icon">üîä</span>
                        ÏïåÎ¶º ÏÑ§Ï†ï
                    </label>
                    <label style="display: flex; align-items: center; margin-top: 8px;">
                        <input type="checkbox" id="soundNotification" style="width: auto; margin-right: 8px;">
                        Î≤àÏó≠ ÏôÑÎ£å Ïãú ÏïåÎ¶ºÏùå
                    </label>
                </div>
                <div class="control-group">
                    <label>
                        <span class="control-icon">‚ö°</span>
                        Î≤àÏó≠ ÌíàÏßà
                    </label>
                    <select id="qualitySelect">
                        <option value="fast">Îπ†Î•∏ Î≤àÏó≠</option>
                        <option value="balanced" selected>Í∑†Ìòï</option>
                        <option value="high">Í≥†ÌíàÏßà</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="guide-section">
            <h3>ÏÇ¨Ïö© Í∞ÄÏù¥Îìú & FAQ</h3>
            
            <details>
                <summary>üöÄ Îπ†Î•∏ ÏãúÏûë Í∞ÄÏù¥Îìú</summary>
                <div class="guide-content">
                    <ol>
                        <li><strong>config.json ÌååÏùº ÏÉùÏÑ±:</strong> HTML ÌååÏùºÍ≥º Í∞ôÏùÄ Ìè¥ÎçîÏóê API ÌÇ§ ÏÑ§Ï†ï</li>
                        <li><strong>Î™®Îç∏ ÏÑ†ÌÉù:</strong> ÏÇ¨Ïö©Ìï† AI Î™®Îç∏ÏùÑ ÎìúÎ°≠Îã§Ïö¥ÏóêÏÑú ÏÑ†ÌÉù</li>
                        <li><strong>Î≤àÏó≠ ÏÑ§Ï†ï:</strong> ÌÜ§, ÏÇ∞ÏóÖ Î∂ÑÏïº, Î≤àÏó≠ Î∞©Ìñ• ÏÑ§Ï†ï</li>
                        <li><strong>ÌÖçÏä§Ìä∏ ÏûÖÎ†•:</strong> ÏõêÎ¨∏ ÏòÅÏó≠Ïóê Î≤àÏó≠Ìï† ÌÖçÏä§Ìä∏ ÏûÖÎ†•</li>
                        <li><strong>Î≤àÏó≠ Ïã§Ìñâ:</strong> "Î≤àÏó≠ÌïòÍ∏∞" Î≤ÑÌäº ÌÅ¥Î¶≠ ÎòêÎäî Ctrl+Enter</li>
                    </ol>
                </div>
            </details>

            <details>
                <summary>‚öôÔ∏è config.json ÏÑ§Ï†ï Î∞©Î≤ï</summary>
                <div class="guide-content">
                    <p>HTML ÌååÏùºÍ≥º Í∞ôÏùÄ ÎîîÎ†âÌÜ†Î¶¨Ïóê <code>config.json</code> ÌååÏùºÏùÑ ÏÉùÏÑ±ÌïòÏÑ∏Ïöî:</p>
                    <pre>{
  "openai": {
    "apiKey": "your-openai-api-key",
    "models": ["gpt-4", "gpt-3.5-turbo", "gpt-4-turbo"]
  },
  "anthropic": {
    "apiKey": "your-anthropic-api-key",
    "models": ["claude-3-5-sonnet-20241022", "claude-3-haiku-20240307"]
  },
  "google": {
    "apiKey": "your-google-api-key",
    "models": ["gemini-pro", "gemini-pro-vision"]
  }
}</pre>
                    <p><strong>‚ö†Ô∏è Î≥¥Ïïà Ï£ºÏùòÏÇ¨Ìï≠:</strong> config.json ÌååÏùºÏùÑ Ï†àÎåÄ Í≥µÍ∞ú Ï†ÄÏû•ÏÜåÏóê ÏóÖÎ°úÎìúÌïòÏßÄ ÎßàÏÑ∏Ïöî!</p>
                </div>
            </details>

            <details>
                <summary>üîß Î™®Îç∏Î≥Ñ ÌäπÏßï Î∞è Í∂åÏû•ÏÇ¨Ìï≠</summary>
                <div class="guide-content">
                    <ul>
                        <li><strong>GPT-4:</strong> ÏµúÍ≥† ÌíàÏßà, Î≥µÏû°Ìïú Î¨∏ÏÑúÏóê Ï†ÅÌï© (ÎπÑÏö© ÎÜíÏùå)</li>
                        <li><strong>GPT-3.5-turbo:</strong> Í∑†ÌòïÏû°Ìûå ÏÑ±Îä•, ÏùºÎ∞òÏ†ÅÏù∏ ÏóÖÎ¨¥Ïóê Ï†ÅÌï©</li>
                        <li><strong>Claude 3.5 Sonnet:</strong> Í∏¥ Î¨∏ÏÑú Ï≤òÎ¶¨Ïóê Ïö∞Ïàò, Ï∞ΩÏùòÏ†Å Î≤àÏó≠</li>
                        <li><strong>Claude 3 Haiku:</strong> Îπ†Î•∏ ÏÜçÎèÑ, Í∞ÑÎã®Ìïú ÌÖçÏä§Ìä∏Ïóê Ï†ÅÌï©</li>
                        <li><strong>Gemini Pro:</strong> Íµ¨Í∏ÄÏùò ÏµúÏã† Î™®Îç∏, Îã§ÏñëÌïú Ïñ∏Ïñ¥ ÏßÄÏõê</li>
                    </ul>
                </div>
            </details>

            <details>
                <summary>‚å®Ô∏è ÌÇ§Î≥¥Îìú Îã®Ï∂ïÌÇ§</summary>
                <div class="guide-content">
                    <ul>
                        <li><kbd>Ctrl + Enter</kbd>: Î≤àÏó≠ Ïã§Ìñâ</li>
                        <li><kbd>Ctrl + R</kbd>: ÏõêÎ¨∏Í≥º Î≤àÏó≠Î¨∏ ÍµêÏ≤¥</li>
                        <li><kbd>Ctrl + C</kbd>: ÌôúÏÑ± ÌÖçÏä§Ìä∏ Î≥µÏÇ¨</li>
                        <li><kbd>Alt + T</kbd>: ÌÖåÎßà Ï†ÑÌôò</li>
                        <li><kbd>Ctrl + Del</kbd>: ÏõêÎ¨∏ ÏßÄÏö∞Í∏∞</li>
                        <li><kbd>F1</kbd>: ÎèÑÏõÄÎßê ÌëúÏãú</li>
                    </ul>
                </div>
            </details>

            <details>
                <summary>üí° Î≤àÏó≠ ÌíàÏßà Ìñ•ÏÉÅ ÌåÅ</summary>
                <div class="guide-content">
                    <ul>
                        <li><strong>Î¨∏Îß• Ï†úÍ≥µ:</strong> Î≤àÏó≠Ìï† ÌÖçÏä§Ìä∏Ïùò Î∞∞Í≤Ω Ï†ïÎ≥¥Î•º Ìè¨Ìï®ÌïòÏÑ∏Ïöî</li>
                        <li><strong>Ï†ÅÏ†àÌïú ÌÜ§ ÏÑ†ÌÉù:</strong> Î¨∏ÏÑúÏùò Î™©Ï†ÅÏóê ÎßûÎäî ÌÜ§ÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</li>
                        <li><strong>ÏÇ∞ÏóÖ Î∂ÑÏïº ÏßÄÏ†ï:</strong> Ï†ÑÎ¨∏ Ïö©Ïñ¥ Î≤àÏó≠Ïùò Ï†ïÌôïÎèÑÍ∞Ä Ìñ•ÏÉÅÎê©ÎãàÎã§</li>
                        <li><strong>Î¨∏Îã® Îã®ÏúÑ Î≤àÏó≠:</strong> ÎÑàÎ¨¥ Í∏¥ ÌÖçÏä§Ìä∏Îäî Î¨∏Îã®Î≥ÑÎ°ú ÎÇòÎàÑÏñ¥ Î≤àÏó≠ÌïòÏÑ∏Ïöî</li>
                        <li><strong>Í≤ÄÌÜ† Î∞è ÏàòÏ†ï:</strong> Î≤àÏó≠ Í≤∞Í≥ºÎ•º Ìï≠ÏÉÅ Í≤ÄÌÜ†ÌïòÍ≥† ÌïÑÏöîÏãú ÏàòÏ†ïÌïòÏÑ∏Ïöî</li>
                    </ul>
                </div>
            </details>

            <details>
                <summary>‚ùì ÏûêÏ£º Î¨ªÎäî ÏßàÎ¨∏</summary>
                <div class="guide-content">
                    <p><strong>Q: API ÌÇ§Îäî Ïñ¥ÎñªÍ≤å Î∞úÍ∏âÎ∞õÎÇòÏöî?</strong></p>
                    <p>A: Í∞Å ÏÑúÎπÑÏä§ Ï†úÍ≥µÏóÖÏ≤¥Ïùò Í≥µÏãù ÏõπÏÇ¨Ïù¥Ìä∏ÏóêÏÑú Í≥ÑÏ†ïÏùÑ ÏÉùÏÑ±ÌïòÍ≥† API ÌÇ§Î•º Î∞úÍ∏âÎ∞õÏúºÏÑ∏Ïöî.</p>
                    
                    <p><strong>Q: Î≤àÏó≠ ÎπÑÏö©ÏùÄ ÏñºÎßàÎÇò ÎìúÎÇòÏöî?</strong></p>
                    <p>A: Î™®Îç∏ÎßàÎã§ ÌÜ†ÌÅ∞Îãπ ÎπÑÏö©Ïù¥ Îã§Î¶ÖÎãàÎã§. ÏùºÎ∞òÏ†ÅÏúºÎ°ú ÏßßÏùÄ ÌÖçÏä§Ìä∏Îäî Îß§Ïö∞ Ï†ÄÎ†¥Ìï©ÎãàÎã§.</p>
                    
                    <p><strong>Q: Ïò§ÌîÑÎùºÏù∏ÏóêÏÑú ÏÇ¨Ïö©Ìï† Ïàò ÏûàÎÇòÏöî?</strong></p>
                    <p>A: ÌòÑÏû¨Îäî Ïò®ÎùºÏù∏ APIÎ•º ÏÇ¨Ïö©ÌïòÎØÄÎ°ú Ïù∏ÌÑ∞ÎÑ∑ Ïó∞Í≤∞Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§.</p>
                    
                    <p><strong>Q: Î≤àÏó≠ Í≤∞Í≥ºÍ∞Ä ÎßåÏ°±Ïä§ÎüΩÏßÄ ÏïäÎã§Î©¥?</strong></p>
                    <p>A: Îã§Î•∏ Î™®Îç∏ÏùÑ ÏãúÎèÑÌïòÍ±∞ÎÇò, ÌÜ§Í≥º ÏÇ∞ÏóÖ Î∂ÑÏïºÎ•º Ï°∞Ï†ïÌï¥ Î≥¥ÏÑ∏Ïöî.</p>
                </div>
            </details>

            <details>
                <summary>üîí Î≥¥Ïïà Î∞è Í∞úÏù∏Ï†ïÎ≥¥ Î≥¥Ìò∏</summary>
                <div class="guide-content">
                    <ul>
                        <li>Î≤àÏó≠ Îç∞Ïù¥ÌÑ∞Îäî Î∏åÎùºÏö∞Ï†ÄÏóêÎßå Ï†ÄÏû•Îê©ÎãàÎã§</li>
                        <li>API ÌÇ§Îäî Î°úÏª¨ config.json ÌååÏùºÏóêÎßå Î≥¥Í¥ÄÎê©ÎãàÎã§</li>
                        <li>ÎØºÍ∞êÌïú Ï†ïÎ≥¥ Î≤àÏó≠ Ïãú Ï£ºÏùòÌïòÏÑ∏Ïöî</li>
                        <li>ÌûàÏä§ÌÜ†Î¶¨Îäî Ïñ∏Ï†úÎì† ÏÇ≠Ï†úÌï† Ïàò ÏûàÏäµÎãàÎã§</li>
                        <li>ÏÑúÎ≤ÑÏóê Îç∞Ïù¥ÌÑ∞Í∞Ä Ï†ÄÏû•ÎêòÏßÄ ÏïäÏäµÎãàÎã§</li>
                    </ul>
                </div>
            </details>
        </div>
    </div>

    <input type="file" id="fileInput" accept=".txt,.docx,.pdf" style="display: none;" onchange="handleFileUpload(event)">

    <script>
        let config = null;
        let translationHistory = JSON.parse(localStorage.getItem('translationHistory') || '[]');
        let translationStats = JSON.parse(localStorage.getItem('translationStats') || '{"total": 0, "characters": 0, "today": 0}');
        let isTranslating = false;

        // Î™®Îç∏Î≥Ñ ÎπÑÏö© Ï†ïÎ≥¥ (ÌÜ†ÌÅ∞Îãπ USD)
        const modelCosts = {
            'gpt-4': { input: 0.00003, output: 0.00006 },
            'gpt-3.5-turbo': { input: 0.000001, output: 0.000002 },
            'claude-3-5-sonnet-20241022': { input: 0.000003, output: 0.000015 },
            'claude-3-haiku-20240307': { input: 0.00000025, output: 0.00000125 },
            'gemini-pro': { input: 0.00000025, output: 0.0000005 }
        };

        // Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò Ï¥àÍ∏∞Ìôî
        document.addEventListener('DOMContentLoaded', function() {
            loadConfig();
            updateCharCount();
            updateApiStatus();
            updateStats();
            loadSettings();
            
            // ÌÖåÎßà Ï¥àÍ∏∞Ìôî
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            updateThemeToggle();

            // Ïò§Îäò ÎÇ†Ïßú Ï≤¥ÌÅ¨
            checkDailyReset();
        });

        // ÏùºÏùº ÌÜµÍ≥Ñ Î¶¨ÏÖã Ï≤¥ÌÅ¨
        function checkDailyReset() {
            const today = new Date().toDateString();
            const lastDate = localStorage.getItem('lastDate');
            
            if (lastDate !== today) {
                translationStats.today = 0;
                localStorage.setItem('lastDate', today);
                saveStats();
            }
        }

        // ÏÑ§Ï†ï ÌååÏùº Î°úÎìú
        async function loadConfig() {
            try {
                const response = await fetch('./config.json');
                if (!response.ok) {
                    throw new Error('config.json ÌååÏùºÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§');
                }
                config = await response.json();
                populateModelSelect();
                updateApiStatus('ready');
            } catch (error) {
                showAlert('error', `ÏÑ§Ï†ï ÌååÏùº Î°úÎìú Ïã§Ìå®: ${error.message}. ÏÑ§Ï†ï Í∞ÄÏù¥ÎìúÎ•º ÌôïÏù∏ÌïòÏÑ∏Ïöî.`);
                updateApiStatus('error');
            }
        }

        // Î™®Îç∏ ÏÑ†ÌÉù ÏòµÏÖò ÏÉùÏÑ±
        function populateModelSelect() {
            const select = document.getElementById('modelSelect');
            select.innerHTML = '<option value="">Î™®Îç∏ÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>';
            
            if (!config) return;

            Object.entries(config).forEach(([provider, data]) => {
                if (data.apiKey && data.models) {
                    data.models.forEach(model => {
                        const option = document.createElement('option');
                        option.value = `${provider}:${model}`;
                        option.textContent = `${provider.toUpperCase()} - ${model}`;
                        select.appendChild(option);
                    });
                }
            });
        }

        // Î™®Îç∏ Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏
        function updateModelInfo() {
            const select = document.getElementById('modelSelect');
            const info = document.getElementById('modelInfo');
            
            if (!select.value) {
                info.textContent = '';
                return;
            }

            const [provider, model] = select.value.split(':');
            const modelInfo = getModelInfo(model);
            info.textContent = modelInfo;
            calculateCost();
        }

        function getModelInfo(model) {
            const infoMap = {
                'gpt-4': 'ÏµúÍ≥† ÌíàÏßà, Î≥µÏû°Ìïú Î¨∏ÏÑú Ï≤òÎ¶¨Ïóê ÏµúÏ†Å',
                'gpt-3.5-turbo': 'Îπ†Î•¥Í≥† Ìö®Ïú®Ï†Å, ÏùºÎ∞òÏ†ÅÏù∏ Î≤àÏó≠Ïóê Ï†ÅÌï©',
                'claude-3-5-sonnet-20241022': 'Í∏¥ Î¨∏ÏÑúÏôÄ Ï∞ΩÏùòÏ†Å Î≤àÏó≠Ïóê Ïö∞Ïàò',
                'claude-3-haiku-20240307': 'Îπ†Î•∏ ÏÜçÎèÑ, Í∞ÑÎã®Ìïú ÌÖçÏä§Ìä∏Ïóê ÏµúÏ†Å',
                'gemini-pro': 'Îã§ÏñëÌïú Ïñ∏Ïñ¥ ÏßÄÏõê, Í∑†ÌòïÏû°Ìûå ÏÑ±Îä•'
            };
            return infoMap[model] || 'Î™®Îç∏ Ï†ïÎ≥¥ ÏóÜÏùå';
        }

        // ÎπÑÏö© Í≥ÑÏÇ∞
        function calculateCost() {
            const text = document.getElementById('sourceText').value;
            const modelSelect = document.getElementById('modelSelect').value;
            const costElement = document.getElementById('costEstimate');

            if (!text || !modelSelect) {
                costElement.style.display = 'none';
                return;
            }

            const [provider, model] = modelSelect.split(':');
            const costs = modelCosts[model];
            
            if (!costs) {
                costElement.style.display = 'none';
                return;
            }

            // ÎåÄÎûµÏ†ÅÏù∏ ÌÜ†ÌÅ∞ Ïàò Í≥ÑÏÇ∞ (1ÌÜ†ÌÅ∞ ‚âà 4Í∏ÄÏûê)
            const estimatedTokens = Math.ceil(text.length / 4);
            const estimatedCost = (estimatedTokens * costs.input) + (estimatedTokens * costs.output);
            
            costElement.textContent = `~$${estimatedCost.toFixed(4)}`;
            costElement.style.display = estimatedCost > 0.001 ? 'inline-block' : 'none';
        }

        // API ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
        function updateApiStatus(status = 'error') {
            const indicator = document.getElementById('apiStatus');
            indicator.className = `status-indicator status-${status}`;
        }

        // ÌÜµÍ≥Ñ ÏóÖÎç∞Ïù¥Ìä∏
        function updateStats() {
            document.getElementById('totalTranslations').textContent = translationStats.total.toLocaleString();
            document.getElementById('totalCharacters').textContent = translationStats.characters.toLocaleString();
            document.getElementById('todayTranslations').textContent = translationStats.today.toLocaleString();
            
            const avgLength = translationStats.total > 0 ? 
                Math.round(translationStats.characters / translationStats.total) : 0;
            document.getElementById('averageLength').textContent = avgLength.toLocaleString();
        }

        function saveStats() {
            localStorage.setItem('translationStats', JSON.stringify(translationStats));
            updateStats();
        }

        // ÏÑ§Ï†ï Î°úÎìú/Ï†ÄÏû•
        function loadSettings() {
            const settings = JSON.parse(localStorage.getItem('appSettings') || '{}');
            
            document.getElementById('autoSave').checked = settings.autoSave !== false;
            document.getElementById('soundNotification').checked = settings.soundNotification === true;
            document.getElementById('qualitySelect').value = settings.quality || 'balanced';
        }

        function saveSettings() {
            const settings = {
                autoSave: document.getElementById('autoSave').checked,
                soundNotification: document.getElementById('soundNotification').checked,
                quality: document.getElementById('qualitySelect').value
            };
            localStorage.setItem('appSettings', JSON.stringify(settings));
        }

        // ÏÑ§Ï†ï Î≥ÄÍ≤Ω Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà
        document.addEventListener('change', function(e) {
            if (['autoSave', 'soundNotification', 'qualitySelect'].includes(e.target.id)) {
                saveSettings();
            }
        });

        // ÏïåÎ¶º ÌëúÏãú (Í∞úÏÑ†Îêú Î≤ÑÏ†Ñ)
        function showAlert(type, message, duration = 5000) {
            const alertsContainer = document.getElementById('alerts');
            const alert = document.createElement('div');
            alert.className = `alert alert-${type}`;
            
            const icons = {
                error: '‚ùå',
                warning: '‚ö†Ô∏è',
                info: '‚ÑπÔ∏è',
                success: '‚úÖ'
            };
            
            alert.innerHTML = `
                <span>${icons[type] || '‚ÑπÔ∏è'}</span>
                <span>${message}</span>
                <button class="alert-close" onclick="this.parentElement.remove()">&times;</button>
            `;
            
            alertsContainer.appendChild(alert);
            
            // ÏûêÎèô Ï†úÍ±∞
            setTimeout(() => {
                if (alert.parentElement) {
                    alert.remove();
                }
            }, duration);

            // ÏÇ¨Ïö¥Îìú ÏïåÎ¶º
            if (document.getElementById('soundNotification').checked) {
                playNotificationSound(type);
            }
        }

        function playNotificationSound(type) {
            // Web Audio APIÎ•º ÏÇ¨Ïö©Ìïú Í∞ÑÎã®Ìïú ÏïåÎ¶ºÏùå
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();

            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            const frequencies = {
                success: 800,
                error: 400,
                warning: 600,
                info: 700
            };

            oscillator.frequency.value = frequencies[type] || 700;
            oscillator.type = 'sine';
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);

            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.3);
        }

        // Í∏ÄÏûê Ïàò Î∞è ÏßÑÌñâÎ•† ÏóÖÎç∞Ïù¥Ìä∏
        function updateCharCount() {
            const sourceText = document.getElementById('sourceText').value;
            const targetText = document.getElementById('targetText').value;
            
            document.getElementById('sourceCount').textContent = `${sourceText.length.toLocaleString()}Ïûê`;
            document.getElementById('targetCount').textContent = `${targetText.length.toLocaleString()}Ïûê`;
            
            // ÏßÑÌñâÎ•† Î∞î ÏóÖÎç∞Ïù¥Ìä∏ (ÏµúÎåÄ 5000Ïûê Í∏∞Ï§Ä)
            const maxChars = 5000;
            const sourceProgress = Math.min((sourceText.length / maxChars) * 100, 100);
            const targetProgress = Math.min((targetText.length / maxChars) * 100, 100);
            
            document.getElementById('sourceProgress').style.width = `${sourceProgress}%`;
            document.getElementById('targetProgress').style.width = `${targetProgress}%`;
        }

        // Î≤àÏó≠ Ïã§Ìñâ (Í∞úÏÑ†Îêú Î≤ÑÏ†Ñ)
        async function translateText() {
            if (isTranslating) return;
            
            const sourceText = document.getElementById('sourceText').value.trim();
            const modelSelect = document.getElementById('modelSelect').value;
            
            if (!sourceText) {
                showAlert('warning', 'Î≤àÏó≠Ìï† ÌÖçÏä§Ìä∏Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
                return;
            }
            
            if (!modelSelect) {
                showAlert('warning', 'AI Î™®Îç∏ÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.');
                return;
            }
            
            if (!config) {
                showAlert('error', 'API ÏÑ§Ï†ïÏùÑ Î®ºÏ†Ä Î°úÎìúÌï¥Ï£ºÏÑ∏Ïöî.');
                return;
            }

            const [provider, model] = modelSelect.split(':');
            const translateBtn = document.getElementById('translateBtn');
            
            // Î°úÎî© ÏÉÅÌÉú ÏãúÏûë
            isTranslating = true;
            translateBtn.classList.add('loading');
            translateBtn.textContent = 'Î≤àÏó≠ Ï§ë...';
            updateApiStatus('loading');
            
            const startTime = Date.now();
            
            try {
                const result = await callTranslationAPI(provider, model, sourceText);
                const endTime = Date.now();
                const duration = ((endTime - startTime) / 1000).toFixed(1);
                
                document.getElementById('targetText').value = result;
                updateCharCount();
                
                // ÌÜµÍ≥Ñ ÏóÖÎç∞Ïù¥Ìä∏
                translationStats.total++;
                translationStats.today++;
                translationStats.characters += sourceText.length;
                saveStats();
                
                // ÌûàÏä§ÌÜ†Î¶¨Ïóê Ï∂îÍ∞Ä
                if (document.getElementById('autoSave').checked) {
                    addToHistory(sourceText, result, model, duration);
                }
                
                showAlert('success', `Î≤àÏó≠Ïù¥ ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§. (${duration}Ï¥à)`);
                updateApiStatus('ready');
                
            } catch (error) {
                showAlert('error', `Î≤àÏó≠ Ïã§Ìå®: ${error.message}`);
                updateApiStatus('error');
            } finally {
                isTranslating = false;
                translateBtn.classList.remove('loading');
                translateBtn.textContent = '‚ú® Î≤àÏó≠ÌïòÍ∏∞';
            }
        }

        // Î≤àÏó≠ Í∞úÏÑ†
        async function improveTranslation() {
            const targetText = document.getElementById('targetText').value.trim();
            const sourceText = document.getElementById('sourceText').value.trim();
            const modelSelect = document.getElementById('modelSelect').value;
            
            if (!targetText || !sourceText) {
                showAlert('warning', 'Í∞úÏÑ†Ìï† Î≤àÏó≠Î¨∏Ïù¥ ÏóÜÏäµÎãàÎã§.');
                return;
            }

            if (!modelSelect) {
                showAlert('warning', 'AI Î™®Îç∏ÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.');
                return;
            }

            const [provider, model] = modelSelect.split(':');
            
            try {
                const improvePrompt = `Îã§Ïùå Î≤àÏó≠ÏùÑ Îçî ÏûêÏó∞Ïä§ÎüΩÍ≥† Ï†ïÌôïÌïòÍ≤å Í∞úÏÑ†Ìï¥Ï£ºÏÑ∏Ïöî:

ÏõêÎ¨∏: ${sourceText}
Í∏∞Ï°¥ Î≤àÏó≠: ${targetText}

Í∞úÏÑ†Îêú Î≤àÏó≠:`;

                const improvedResult = await callTranslationAPI(provider, model, sourceText, improvePrompt);
                document.getElementById('targetText').value = improvedResult;
                updateCharCount();
                
                showAlert('success', 'Î≤àÏó≠Ïù¥ Í∞úÏÑ†ÎêòÏóàÏäµÎãàÎã§.');
                
            } catch (error) {
                showAlert('error', `Î≤àÏó≠ Í∞úÏÑ† Ïã§Ìå®: ${error.message}`);
            }
        }

        // API Ìò∏Ï∂ú
        async function callTranslationAPI(provider, model, text, customPrompt = null) {
            const tone = document.getElementById('toneSelect').value;
            const industry = document.getElementById('industrySelect').value;
            const direction = document.getElementById('directionSelect').value;
            const quality = document.getElementById('qualitySelect').value;
            
            const prompt = customPrompt || generatePrompt(text, tone, industry, direction, quality);
            
            switch (provider) {
                case 'openai':
                    return await callOpenAI(model, prompt);
                case 'anthropic':
                    return await callAnthropic(model, prompt);
                case 'google':
                    return await callGoogle(model, prompt);
                default:
                    throw new Error('ÏßÄÏõêÌïòÏßÄ ÏïäÎäî Î™®Îç∏ÏûÖÎãàÎã§.');
            }
        }

        // ÌîÑÎ°¨ÌîÑÌä∏ ÏÉùÏÑ± (Í∞úÏÑ†Îêú Î≤ÑÏ†Ñ)
        function generatePrompt(text, tone, industry, direction, quality) {
            const [sourceLang, targetLang] = direction.split('-');
            const languageMap = {
                'ko': 'ÌïúÍµ≠Ïñ¥', 'en': 'ÏòÅÏñ¥', 'ja': 'ÏùºÎ≥∏Ïñ¥', 'zh': 'Ï§ëÍµ≠Ïñ¥'
            };
            
            const sourceLanguage = languageMap[sourceLang];
            const targetLanguage = languageMap[targetLang];
            
            const toneMap = {
                'formal': 'Îß§Ïö∞ Í≥µÏãùÏ†ÅÏù¥Í≥† Í≤©ÏãùÏûàÎäî',
                'business': 'ÎπÑÏ¶àÎãàÏä§Ïóê Ï†ÅÌï©Ìïú Ï†ÑÎ¨∏Ï†ÅÏù∏',
                'casual': 'ÏûêÏó∞Ïä§ÎüΩÍ≥† ÏùºÎ∞òÏ†ÅÏù∏',
                'academic': 'ÌïôÏà†Ï†ÅÏù¥Í≥† Ï†ïÌôïÌïú',
                'creative': 'Ï∞ΩÏùòÏ†ÅÏù¥Í≥† ÌëúÌòÑÎ†• ÏûàÎäî'
            };
            
            const industryMap = {
                'general': 'ÏùºÎ∞òÏ†ÅÏù∏',
                'legal': 'Î≤ïÎ•† Î∂ÑÏïº',
                'finance': 'Í∏àÏúµ Î∂ÑÏïº',
                'technology': 'Í∏∞Ïà†/IT Î∂ÑÏïº',
                'medical': 'ÏùòÎ£å Î∂ÑÏïº',
                'marketing': 'ÎßàÏºÄÌåÖ Î∂ÑÏïº',
                'manufacturing': 'Ï†úÏ°∞ÏóÖ Î∂ÑÏïº',
                'education': 'ÍµêÏú° Î∂ÑÏïº'
            };

            const qualityMap = {
                'fast': 'Îπ†Î•∏ Î≤àÏó≠ÏùÑ Ïö∞ÏÑ†ÏãúÌïòÏó¨',
                'balanced': 'ÌíàÏßàÍ≥º ÏÜçÎèÑÏùò Í∑†ÌòïÏùÑ ÎßûÏ∂∞',
                'high': 'ÏµúÍ≥† ÌíàÏßàÏùÑ ÏúÑÌï¥ Ïã†Ï§ëÌïòÍ≤å'
            };
            
            return `ÎãπÏã†ÏùÄ Ï†ÑÎ¨∏ Î≤àÏó≠Í∞ÄÏûÖÎãàÎã§. Îã§Ïùå ${sourceLanguage} ÌÖçÏä§Ìä∏Î•º ${targetLanguage}Î°ú ${qualityMap[quality]} Î≤àÏó≠Ìï¥Ï£ºÏÑ∏Ïöî.

Î≤àÏó≠ Ï°∞Í±¥:
- ÌÜ§: ${toneMap[tone]}
- Î∂ÑÏïº: ${industryMap[industry]}
- Î¨∏Îß•Í≥º ÎâòÏïôÏä§Î•º Ï†ïÌôïÌûà Ï†ÑÎã¨
- Ï†ÑÎ¨∏ Ïö©Ïñ¥Îäî Ìï¥Îãπ Î∂ÑÏïºÏùò ÌëúÏ§Ä Ïö©Ïñ¥ ÏÇ¨Ïö©
- ÏûêÏó∞Ïä§ÎüΩÍ≥† ÏùΩÍ∏∞ Ïâ¨Ïö¥ Î≤àÏó≠
- ÏõêÎ¨∏Ïùò ÏùòÎèÑÏôÄ Í∞êÏ†ïÏùÑ Î≥¥Ï°¥

ÏõêÎ¨∏:
${text}

Î≤àÏó≠Î¨∏:`;
        }

        // OpenAI API Ìò∏Ï∂ú
        async function callOpenAI(model, prompt) {
            const response = await fetch('https://api.openai.com/v1/chat/completions', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${config.openai.apiKey}`
                },
                body: JSON.stringify({
                    model: model,
                    messages: [{ role: 'user', content: prompt }],
                    temperature: 0.3,
                    max_tokens: 4000
                })
            });
            
            if (!response.ok) {
                const errorData = await response.json().catch(() => ({}));
                throw new Error(`OpenAI API Ïò§Î•ò: ${response.status} - ${errorData.error?.message || 'Unknown error'}`);
            }
            
            const data = await response.json();
            return data.choices[0].message.content.trim();
        }

        // Anthropic API Ìò∏Ï∂ú
        async function callAnthropic(model, prompt) {
            const response = await fetch('https://api.anthropic.com/v1/messages', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'x-api-key': config.anthropic.apiKey,
                    'anthropic-version': '2023-06-01'
                },
                body: JSON.stringify({
                    model: model,
                    max_tokens: 4000,
                    messages: [{ role: 'user', content: prompt }],
                    temperature: 0.3
                })
            });
            
            if (!response.ok) {
                const errorData = await response.json().catch(() => ({}));
                throw new Error(`Anthropic API Ïò§Î•ò: ${response.status} - ${errorData.error?.message || 'Unknown error'}`);
            }
            
            const data = await response.json();
            return data.content[0].text.trim();
        }

        // Google API Ìò∏Ï∂ú
        async function callGoogle(model, prompt) {
            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${config.google.apiKey}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    contents: [{
                        parts: [{ text: prompt }]
                    }],
                    generationConfig: {
                        temperature: 0.3,
                        maxOutputTokens: 4000
                    }
                })
            });
            
            if (!response.ok) {
                const errorData = await response.json().catch(() => ({}));
                throw new Error(`Google API Ïò§Î•ò: ${response.status} - ${errorData.error?.message || 'Unknown error'}`);
            }
            
            const data = await response.json();
            return data.candidates[0].content.parts[0].text.trim();
        }

        // ÌûàÏä§ÌÜ†Î¶¨ Í¥ÄÎ¶¨ (Í∞úÏÑ†Îêú Î≤ÑÏ†Ñ)
        function addToHistory(source, target, model, duration) {
            const historyItem = {
                id: Date.now(),
                timestamp: new Date().toLocaleString('ko-KR'),
                date: new Date().toISOString().split('T')[0],
                model: model,
                source: source,
                target: target,
                direction: document.getElementById('directionSelect').value,
                tone: document.getElementById('toneSelect').value,
                industry: document.getElementById('industrySelect').value,
                duration: duration,
                characters: source.length
            };
            
            translationHistory.unshift(historyItem);
            
            // ÏµúÎåÄ 100Í∞ú Ìï≠Î™© Ïú†ÏßÄ
            if (translationHistory.length > 100) {
                translationHistory = translationHistory.slice(0, 100);
            }
            
            localStorage.setItem('translationHistory', JSON.stringify(translationHistory));
        }

        function toggleHistory() {
            const historyList = document.getElementById('historyList');
            const toggleBtn = document.getElementById('historyToggle');
            
            if (historyList.style.display === 'none') {
                displayHistory();
                historyList.style.display = 'block';
                toggleBtn.textContent = 'üìö ÌûàÏä§ÌÜ†Î¶¨ Ïà®Í∏∞Í∏∞';
            } else {
                historyList.style.display = 'none';
                toggleBtn.textContent = 'üìö ÌûàÏä§ÌÜ†Î¶¨ Î≥¥Í∏∞';
            }
        }

        function displayHistory(filteredHistory = null) {
            const historyList = document.getElementById('historyList');
            const history = filteredHistory || translationHistory;
            
            if (history.length === 0) {
                historyList.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 20px;">Î≤àÏó≠ ÌûàÏä§ÌÜ†Î¶¨Í∞Ä ÏóÜÏäµÎãàÎã§.</p>';
                return;
            }
            
            historyList.innerHTML = history.map(item => `
                <div class="history-item">
                    <div class="history-meta">
                        <div class="history-tags">
                            <span class="tag">${item.model}</span>
                            <span class="tag">${item.direction}</span>
                            <span class="tag">${item.tone}</span>
                            <span class="tag">${item.industry}</span>
                        </div>
                        <div>
                            ${item.timestamp}
                            ${item.duration ? `(${item.duration}Ï¥à)` : ''}
                            <button class="btn-icon" onclick="useHistoryItem(${item.id})" title="Îã§Ïãú ÏÇ¨Ïö©" style="margin-left: 8px;">‚Ü©Ô∏è</button>
                            <button class="btn-icon" onclick="deleteHistoryItem(${item.id})" title="ÏÇ≠Ï†ú" style="margin-left: 4px;">üóëÔ∏è</button>
                        </div>
                    </div>
                    <div class="history-content">
                        <div class="history-text">
                            <strong>ÏõêÎ¨∏ (${item.characters}Ïûê):</strong><br>
                            ${item.source.length > 200 ? item.source.substring(0, 200) + '...' : item.source}
                        </div>
                        <div class="history-text">
                            <strong>Î≤àÏó≠Î¨∏:</strong><br>
                            ${item.target.length > 200 ? item.target.substring(0, 200) + '...' : item.target}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function useHistoryItem(id) {
            const item = translationHistory.find(h => h.id === id);
            if (item) {
                document.getElementById('sourceText').value = item.source;
                document.getElementById('targetText').value = item.target;
                document.getElementById('directionSelect').value = item.direction;
                document.getElementById('toneSelect').value = item.tone;
                document.getElementById('industrySelect').value = item.industry;
                updateCharCount();
                showAlert('success', 'ÌûàÏä§ÌÜ†Î¶¨ Ìï≠Î™©ÏùÑ Î∂àÎü¨ÏôîÏäµÎãàÎã§.');
                
                // ÌéòÏù¥ÏßÄ ÏÉÅÎã®ÏúºÎ°ú Ïä§ÌÅ¨Î°§
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function deleteHistoryItem(id) {
            if (confirm('Ïù¥ ÌûàÏä§ÌÜ†Î¶¨ Ìï≠Î™©ÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) {
                translationHistory = translationHistory.filter(h => h.id !== id);
                localStorage.setItem('translationHistory', JSON.stringify(translationHistory));
                displayHistory();
                showAlert('info', 'ÌûàÏä§ÌÜ†Î¶¨ Ìï≠Î™©Ïù¥ ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§.');
            }
        }

        function searchHistory() {
            const searchInput = document.getElementById('historySearch');
            searchInput.style.display = searchInput.style.display === 'none' ? 'block' : 'none';
            if (searchInput.style.display === 'block') {
                searchInput.focus();
            }
        }

        function filterHistory() {
            const searchTerm = document.getElementById('historySearch').value.toLowerCase();
            if (!searchTerm) {
                displayHistory();
                return;
            }
            
            const filtered = translationHistory.filter(item => 
                item.source.toLowerCase().includes(searchTerm) ||
                item.target.toLowerCase().includes(searchTerm) ||
                item.model.toLowerCase().includes(searchTerm) ||
                item.industry.toLowerCase().includes(searchTerm)
            );
            
            displayHistory(filtered);
        }

        function clearHistory() {
            if (confirm('Î™®Îì† Î≤àÏó≠ ÌûàÏä§ÌÜ†Î¶¨Î•º ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå? Ïù¥ ÏûëÏóÖÏùÄ ÎêòÎèåÎ¶¥ Ïàò ÏóÜÏäµÎãàÎã§.')) {
                translationHistory = [];
                localStorage.removeItem('translationHistory');
                displayHistory();
                showAlert('info', 'Î™®Îì† ÌûàÏä§ÌÜ†Î¶¨Í∞Ä ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§.');
            }
        }

        function exportHistory() {
            if (translationHistory.length === 0) {
                showAlert('warning', 'ÎÇ¥Î≥¥ÎÇº ÌûàÏä§ÌÜ†Î¶¨Í∞Ä ÏóÜÏäµÎãàÎã§.');
                return;
            }
            
            const data = translationHistory.map(item => ({
                ÎÇ†Ïßú: item.timestamp,
                Î™®Îç∏: item.model,
                Î∞©Ìñ•: item.direction,
                ÌÜ§: item.tone,
                Î∂ÑÏïº: item.industry,
                ÏÜåÏöîÏãúÍ∞Ñ: item.duration ? `${item.duration}Ï¥à` : '',
                Í∏ÄÏûêÏàò: item.characters,
                ÏõêÎ¨∏: item.source,
                Î≤àÏó≠Î¨∏: item.target
            }));
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json;charset=utf-8' });
            downloadFile(blob, `translation_history_${new Date().toISOString().split('T')[0]}.json`);
            
            showAlert('success', 'ÌûàÏä§ÌÜ†Î¶¨Í∞Ä ÎÇ¥Î≥¥ÎÇ¥Í∏∞ ÎêòÏóàÏäµÎãàÎã§.');
        }

        // ÌååÏùº ÏóÖÎ°úÎìú
        function uploadFile() {
            document.getElementById('fileInput').click();
        }

        async function handleFileUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            try {
                let text = '';
                
                if (file.type === 'text/plain') {
                    text = await file.text();
                } else {
                    showAlert('warning', 'ÌòÑÏû¨Îäî ÌÖçÏä§Ìä∏ ÌååÏùº(.txt)Îßå ÏßÄÏõêÎê©ÎãàÎã§.');
                    return;
                }
                
                document.getElementById('sourceText').value = text;
                updateCharCount();
                calculateCost();
                showAlert('success', 'ÌååÏùºÏù¥ ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏóÖÎ°úÎìúÎêòÏóàÏäµÎãàÎã§.');
                
            } catch (error) {
                showAlert('error', `ÌååÏùº ÏóÖÎ°úÎìú Ïã§Ìå®: ${error.message}`);
            }
        }

        // Í≥µÏú† Í∏∞Îä•
        async function shareTranslation() {
            const source = document.getElementById('sourceText').value;
            const target = document.getElementById('targetText').value;
            
            if (!source.trim() || !target.trim()) {
                showAlert('warning', 'Í≥µÏú†Ìï† Î≤àÏó≠ ÎÇ¥Ïö©Ïù¥ ÏóÜÏäµÎãàÎã§.');
                return;
            }
            
            const shareData = {
                title: 'AI Î≤àÏó≠ Í≤∞Í≥º',
                text: `ÏõêÎ¨∏: ${source}\n\nÎ≤àÏó≠: ${target}`,
            };
            
            try {
                if (navigator.share) {
                    await navigator.share(shareData);
                    showAlert('success', 'Î≤àÏó≠ Í≤∞Í≥ºÍ∞Ä Í≥µÏú†ÎêòÏóàÏäµÎãàÎã§.');
                } else {
                    // ÌÅ¥Î¶ΩÎ≥¥ÎìúÏóê Î≥µÏÇ¨
                    await navigator.clipboard.writeText(shareData.text);
                    showAlert('info', 'Î≤àÏó≠ Í≤∞Í≥ºÍ∞Ä ÌÅ¥Î¶ΩÎ≥¥ÎìúÏóê Î≥µÏÇ¨ÎêòÏóàÏäµÎãàÎã§.');
                }
            } catch (error) {
                showAlert('error', 'Í≥µÏú†Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
            }
        }

        // Ïú†Ìã∏Î¶¨Ìã∞ Ìï®ÏàòÎì§
        function clearSource() {
            if (confirm('ÏõêÎ¨∏ÏùÑ Î™®Îëê ÏßÄÏö∞ÏãúÍ≤†ÏäµÎãàÍπå?')) {
                document.getElementById('sourceText').value = '';
                updateCharCount();
                calculateCost();
            }
        }

        async function copyText(elementId) {
            const text = document.getElementById(elementId).value;
            if (!text.trim()) {
                showAlert('warning', 'Î≥µÏÇ¨Ìï† ÌÖçÏä§Ìä∏Í∞Ä ÏóÜÏäµÎãàÎã§.');
                return;
            }
            
            try {
                await navigator.clipboard.writeText(text);
                showAlert('success', 'ÌÖçÏä§Ìä∏Í∞Ä ÌÅ¥Î¶ΩÎ≥¥ÎìúÏóê Î≥µÏÇ¨ÎêòÏóàÏäµÎãàÎã§.');
            } catch (error) {
                showAlert('error', 'Î≥µÏÇ¨Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
            }
        }

        async function pasteText(elementId) {
            try {
                const text = await navigator.clipboard.readText();
                document.getElementById(elementId).value = text;
                updateCharCount();
                calculateCost();
                showAlert('success', 'ÌÖçÏä§Ìä∏Í∞Ä Î∂ôÏó¨ÎÑ£Ïñ¥Ï°åÏäµÎãàÎã§.');
            } catch (error) {
                showAlert('error', 'Î∂ôÏó¨ÎÑ£Í∏∞Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
            }
        }

        function exportTranslation() {
            const source = document.getElementById('sourceText').value;
            const target = document.getElementById('targetText').value;
            
            if (!source.trim() || !target.trim()) {
                showAlert('warning', 'ÎÇ¥Î≥¥ÎÇº Î≤àÏó≠ ÎÇ¥Ïö©Ïù¥ ÏóÜÏäµÎãàÎã§.');
                return;
            }
            
            const content = `AI Î≤àÏó≠ Í≤∞Í≥º - ${new Date().toLocaleString('ko-KR')}

ÏÑ§Ï†ï:
- Î™®Îç∏: ${document.getElementById('modelSelect').value}
- ÌÜ§: ${document.getElementById('toneSelect').value}
- Î∂ÑÏïº: ${document.getElementById('industrySelect').value}
- Î∞©Ìñ•: ${document.getElementById('directionSelect').value}

ÏõêÎ¨∏ (${source.length}Ïûê):
${source}

Î≤àÏó≠Î¨∏ (${target.length}Ïûê):
${target}`;
            
            const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
            downloadFile(blob, `translation_${new Date().toISOString().split('T')[0]}.txt`);
            
            showAlert('success', 'Î≤àÏó≠ Í≤∞Í≥ºÍ∞Ä ÎÇ¥Î≥¥ÎÇ¥Í∏∞ ÎêòÏóàÏäµÎãàÎã§.');
        }

        function swapTexts() {
            const sourceText = document.getElementById('sourceText');
            const targetText = document.getElementById('targetText');
            const direction = document.getElementById('directionSelect');
            
            // ÌÖçÏä§Ìä∏ ÍµêÏ≤¥
            const temp = sourceText.value;
            sourceText.value = targetText.value;
            targetText.value = temp;
            
            // Î∞©Ìñ• ÍµêÏ≤¥
            const directionMap = {
                'ko-en': 'en-ko',
                'en-ko': 'ko-en',
                'ko-ja': 'ja-ko',
                'ja-ko': 'ko-ja',
                'ko-zh': 'zh-ko',
                'zh-ko': 'ko-zh'
            };
            
            direction.value = directionMap[direction.value] || direction.value;
            
            updateCharCount();
            calculateCost();
            showAlert('info', 'ÏõêÎ¨∏Í≥º Î≤àÏó≠Î¨∏Ïù¥ ÍµêÏ≤¥ÎêòÏóàÏäµÎãàÎã§.');
        }

        function downloadFile(blob, filename) {
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeToggle();
        }

        function updateThemeToggle() {
            const themeToggle = document.querySelector('.theme-toggle');
            const currentTheme = document.documentElement.getAttribute('data-theme');
            themeToggle.textContent = currentTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
        }

        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function toggleShortcuts() {
            const shortcuts = document.getElementById('shortcuts');
            shortcuts.classList.toggle('show');
        }

        // ÌÇ§Î≥¥Îìú Îã®Ï∂ïÌÇ§ (ÌôïÏû•Îêú Î≤ÑÏ†Ñ)
        document.addEventListener('keydown', function(e) {
            // Ctrl/Cmd + ÌÇ§ Ï°∞Ìï©
            if (e.ctrlKey || e.metaKey) {
                switch(e.key) {
                    case 'Enter':
                        e.preventDefault();
                        if (!isTranslating) translateText();
                        break;
                    case 'r':
                        e.preventDefault();
                        swapTexts();
                        break;
                    case 'Delete':
                        e.preventDefault();
                        clearSource();
                        break;
                    case 's':
                        e.preventDefault();
                        exportTranslation();
                        break;
                }
            }
            
            // Alt + ÌÇ§ Ï°∞Ìï©
            if (e.altKey) {
                switch(e.key) {
                    case 't':
                        e.preventDefault();
                        toggleTheme();
                        break;
                    case 'h':
                        e.preventDefault();
                        toggleHistory();
                        break;
                }
            }
            
            // F ÌÇ§Îì§
            switch(e.key) {
                case 'F1':
                    e.preventDefault();
                    toggleShortcuts();
                    break;
                case 'Escape':
                    document.getElementById('shortcuts').classList.remove('show');
                    break;
            }
        });

        // ÌéòÏù¥ÏßÄ Ïñ∏Î°úÎìú Ïãú ÏÑ§Ï†ï Ï†ÄÏû•
        window.addEventListener('beforeunload', function() {
            saveSettings();
        });

        // ÏÑ±Îä• Î™®ÎãàÌÑ∞ÎßÅ
        let performanceData = {
            translationTimes: [],
            errorCount: 0,
            successCount: 0
        };

        function trackPerformance(duration, success) {
            if (success) {
                performanceData.successCount++;
                performanceData.translationTimes.push(duration);
            } else {
                performanceData.errorCount++;
            }
            
            // ÏµúÍ∑º 10Í∞ú Î≤àÏó≠ ÏãúÍ∞ÑÎßå Ïú†ÏßÄ
            if (performanceData.translationTimes.length > 10) {
                performanceData.translationTimes.shift();
            }
        }

        // Ï†ëÍ∑ºÏÑ± Í∞úÏÑ†
        document.addEventListener('DOMContentLoaded', function() {
            // ÌÇ§Î≥¥Îìú ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò Í∞úÏÑ†
            const focusableElements = 'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';
            const firstFocusable = document.querySelector(focusableElements);
            
            // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ï≤´ Î≤àÏß∏ ÏöîÏÜåÏóê Ìè¨Ïª§Ïä§
            if (firstFocusable) {
                firstFocusable.focus();
            }
        });
    </script>
</body>
</html>
